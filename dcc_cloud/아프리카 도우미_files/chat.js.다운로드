sub = {
    debug:false,
    chat: {
        emoticon: {
            pos:{},
            right:60,
            margin:0,
            maxwidth:400,
            minwidth:200,
            prev:null,
            list:{},
            count:0,
            max:150
        },
        opt: {
            connect: false,
            transdata:{},
            transcheck:true,
            transidx:0,
            transinterval:null,
            transtimeout:2000,
            jointext:"{닉네임}님 어서오세요",
            multiple:false,
            multilen:0,
            idx:0,
            broadlist:[],
            prevmsg:"",
            chatprev:null,
            chatidx:0,
            coloridx:0,
            colorlen:7,
            len:0,
            max:50,
            scroll:true,
            box:null,
            boxwidth:0,
            area:null,
            target:null,
            split:{},
            autointerval:null,
            autohide:3000,
            filterword:"",
            filterlist:[],
            filteridlist:[],
            giftinterval:null,
            audio:null,
            audioerridx:0,
            speechtext:"{닉네임}님이 {채팅}",
            speechsound:fileUrl + "default/mario.mp3",
            speechcheck:true,
            speechdata:[],
            speechfilter:"",
            speechcmdcancel:false,
            previewdata: [
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af1", uname:"아프리카도우미", msg:"안녕하세요. 아프리카 미리보기 채팅입니다." },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af2", uname:"아프리카도우미", msg:"아프리카 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af3", uname:"아프리카도우미", msg:"비밀번호 방송시 아프리카도우미 아이디 설정에도 방송 비밀번호 설정를 설정해주시고" },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af4", uname:"아프리카도우미", msg:"아프리카 프릭샷 및 외부장치 방송속성에 방송숨김설정 체크를 해제해주세요." },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af5", uname:"아프리카도우미", msg:"그 외 아프리카 아이디가 올바른지와 설정도움말의 주의사항을 확인해주세요." },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreehp_af6", uname:"아프리카도우미", msg:"미리보기 채팅은 생방송 시작시 자동으로 삭제됩니다." },
                
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp_yt1", uname:"아프리카도우미", msg:"안녕하세요. 유튜브 미리보기 채팅입니다." },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp_yt2", uname:"아프리카도우미", msg:"유튜브 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp_yt3", uname:"아프리카도우미", msg:"생방송을 시작해야 연동되며, 실시간 스트리밍 사용 및 대시보드의 공개설정을 공개로 해주세요." },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp_yt4", uname:"아프리카도우미", msg:"그 외 유튜브 아이디 연동 갱신 및 설정도움말의 주의사항을 확인해주세요." },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp_yt5", uname:"아프리카도우미", msg:"미리보기 채팅은 생방송 시작시 자동으로 삭제됩니다." },
                
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_ka1", uname:"아프리카도우미", msg:"안녕하세요. 카카오TV 미리보기 채팅입니다." },
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_ka2", uname:"아프리카도우미", msg:"카카오TV 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_ka3", uname:"아프리카도우미", msg:"채널 아이디 설정이 올바른지 확인해주시고, 터프방송 및 비번방은 연동이 불가능합니다." },
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_ka4", uname:"아프리카도우미", msg:"미리보기 채팅은 생방송 시작시 자동으로 삭제됩니다." },
                
                { type:"chat", broadtype:"navertv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_na1", uname:"아프리카도우미", msg:"안녕하세요. 네이버TV 미리보기 채팅입니다." },
                { type:"chat", broadtype:"navertv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_na2", uname:"아프리카도우미", msg:"네이버 채팅창이 표시되지 않을 경우" },
                { type:"chat", broadtype:"navertv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_na3", uname:"아프리카도우미", msg:"네이버 채널ID 설정이 올바른지 확인해주세요. 네이버 아이디가 아닌 채널ID를 입력해주세요." },
                { type:"chat", broadtype:"navertv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_na4", uname:"아프리카도우미", msg:"미리보기 채팅은 생방송 시작시 자동으로 삭제됩니다." },
                
                { type:"chat", broadtype:"facebook", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_fa1", uname:"아프리카도우미", msg:"안녕하세요. 페이스북 미리보기 채팅입니다." },
                { type:"chat", broadtype:"facebook", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_fa2", uname:"아프리카도우미", msg:"페이스북 채팅 연동은 내 타임라인에 게시한 라이브만 연동이 가능합니다. " },
                { type:"chat", broadtype:"facebook", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_fa3", uname:"아프리카도우미", msg:"그 외 페이스북 아이디 연동 갱신 및 설정도움말의 주의사항을 확인해주세요." },
                { type:"chat", broadtype:"facebook", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"afreehp_fa4", uname:"아프리카도우미", msg:"미리보기 채팅은 생방송 시작시 자동으로 삭제됩니다." }
            ],
            data:[
                { type:"chat", broadtype:"afreecatv", grade:"notice", quick:"", support:"", gender:"m", agent:"pc", uid:"", uname:"", msg:"안녕하세요. 아프리카도우미입니다 아프리카 채팅입니다." },
                { type:"chat", broadtype:"afreecatv", grade:"non", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreecatv1", uname:"서포터닉네임", msg:"/뽀뽀/안녕하세요~ 반가워요/뽀뽀/" },
                { type:"star", broadtype:"afreecatv", grade:"gift", quick:"", support:"", gender:"m", agent:"pc", relay:"main", uid:"afreecatv2", uname:"아프리카", msg:"아프리카님이 별풍선 100개를 선물했습니다!", value:100, join:100 },
                { type:"chat", broadtype:"afreecatv", grade:"non", quick:"", support:"", gender:"w", agent:"m", uid:"translate", uname:"영어", msg:"I'm really happy for you<br>(축하해요. 저도 정말 기뻐요)" },
                { type:"star", broadtype:"afreecatv", startype:"afsubscription", subtype:[], grade:"gift", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv", uname:"아프리카", value:1, join:0, msg:"아프리카님이 구독 하였습니다." },
                { type:"star", broadtype:"afreecatv", startype:"ADBALLOON", grade:"gift", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv", uname:"아프리카", value:9, join:0, title:"모바일/사전예약", imgurl:"http://www.afreecatv.com/new_player/items/img_adballoon.png", msg:"아프리카님이 애드벌룬 9개를 선물했습니다!" },
                
                { type:"chat", broadtype:"twitch", grade:{"vip":1, "premium":1, "partner":1, "turbo":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch1", uname:"트위치닉네임", msg:"안녕하세요. 아프리카도우미 트위치 채팅입니다.<img src='//static-cdn.jtvnw.net/emoticons/v1/86/1.0' srcset='//static-cdn.jtvnw.net/emoticons/v1/86/2.0 2x' alt='BibleThump' class='emoticon icon'>" },
                { type:"chat", broadtype:"twitch", grade:{"moderator":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch2", uname:"트위치닉네임", msg:"안녕하세요 전 트위치 관리자입니다." },
                { type:"star", broadtype:"twitch", grade:"gift", gifttype:"bits", quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch3", uname:"트위치", msg:"<img src='http://static-cdn.jtvnw.net/bits/light/animated/purple/2' alt='' class='icon'> 트위치님의 응원 메시지입니다!", img:"http://static-cdn.jtvnw.net/bits/light/animated/purple/2", color:"#9c3ee8", value:100, join:0 },
                { type:"chat", broadtype:"twitch", grade:{}, quick:"none", support:"none", gender:"none", agent:"none", uid:"translate", uname:"일본어", msg:"おめでとうございます。私も、ほんとうにうれしいです。<br>(축하해요. 저도 정말 기뻐요)" },
                
                { type:"chat", broadtype:"youtube", grade:"", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube1", uname:"유튜브닉네임", msg:"안녕하세요. 아프리카도우미 유튜브 채팅입니다." },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube2", uname:"유튜브닉네임", msg:"유튜브 채팅창 및 알림이 표시되지 않을 경우 생방송을 시작해야 연동되며, 실시간 스트리밍 사용 및 대시보드의 공개설정을 공개로 해주세요." },
                { type:"star", broadtype:"youtube", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube3", uname:"유튜브닉네임", msg:"유튜브 슈퍼채팅 후원입니다.", value:"\10,000", display:"\10,000", unit:"", join:0 },
                { type:"chat", broadtype:"youtube", grade:"", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"translate", uname:"중국어", msg:"祝贺你，我也非常高兴。<br>(축하해요. 저도 정말 기뻐요)" },
                
                { type:"chat", broadtype:"kakaotv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv1", uname:"카카오TV", msg:"<img src='" + resourceLink + "emoticon/2200001/thum_002.png' alt='' class='kakaotv_emoticon'>안녕하세요. 아프리카도우미 카카오TV 채팅입니다." },
                { type:"chat", broadtype:"kakaotv", grade:"pd", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv2", uname:"카카오TV", msg:"카카오TV 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv3", uname:"카카오TV", msg:"채널 아이디 설정이 올바른지 확인해주시고, 터프방송 및 비번방은 연동이 불가능합니다." },
                { type:"star", broadtype:"kakaotv", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", cls:"support_area support_type4", uid:"kakaotv4", uname:"카카오TV", msg:"카카오TV 후원 메시지입니다.", value:100, join:0 },
                { type:"chat", broadtype:"kakaotv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"translate", uname:"아랍어", msg:"مبروك، وأنا أيضا سعيد جدا.<br>(축하해요. 저도 정말 기뻐요)" },
                
                { type:"chat", broadtype:"afreecatv", grade:"bj", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv12", uname:"BJ닉네임", msg:"어서오세요. 아프리카 도우미 입니다." },
                { type:"chat", broadtype:"afreecatv", grade:"fan", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv13", uname:"팬닉네임", msg:"아프리카 채팅창 및 알림이 표시되지 않을 경우 아이디 설정, 방송 비밀번호 설정, 방송숨김설정 체크해제를 해주세요." },
                { type:"chat", broadtype:"afreecatv", grade:"non", quick:"", support:"", gender:"w", agent:"m", uid:"afreecatv11", uname:"일반닉네임", msg:"설정도움말의 주의사항을 확인해주세요." },
                { type:"chat", broadtype:"afreecatv", grade:"fan", quick:"quick", support:"sup", gender:"w", agent:"m", uid:"afreecatv14", uname:"팬서포터닉네임", msg:"/꿀잼//꿀잼//꿀잼/ ㅋㅋㅋ" },
                
                { type:"chat", broadtype:"twitch", grade:{"broadcaster":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch11", uname:"트위치닉네임", msg:"트위치 채팅도 추가됐습니다.<img src='//static-cdn.jtvnw.net/emoticons/v1/86/1.0' srcset='//static-cdn.jtvnw.net/emoticons/v1/86/2.0 2x' alt='BibleThump' class='emoticon icon'>" },
                { type:"chat", broadtype:"twitch", grade:{"turbo":1,"premium":1,"subscriber":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch12", uname:"트위치닉네임", msg:"채팅창의 아이콘 설정에 따라 아이콘이 표시됩니다." },
                { type:"star", broadtype:"twitch", grade:"gift", gifttype:"bits", quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch13", uname:"트위치", msg:"<img src='http://static-cdn.jtvnw.net/bits/light/animated/green/2' alt='' class='icon'> 트위치님의 응원 메시지입니다!", img:"http://static-cdn.jtvnw.net/bits/light/animated/green/2", color:"#1db2a5", value:1000, join:0 },
                                
                { type:"chat", broadtype:"youtube", grade:"", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube11", uname:"유튜브닉네임", msg:"유튜브 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"youtube", grade:"getGrade", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube12", uname:"유튜브닉네임", msg:"생방송을 시작해야 연동되며, 실시간 스트리밍 사용 및 대시보드의 공개설정을 공개로 해주세요." },
                { type:"star", broadtype:"youtube", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube13", uname:"유튜브닉네임", msg:"유튜브 슈퍼채팅 후원입니다.", value:"$100.00", display:"$100.00", unit:"", join:0 },
                
                { type:"chat", broadtype:"kakaotv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv11", uname:"카카오TV", msg:"카카오TV 채팅 내용입니다." },
                { type:"chat", broadtype:"kakaotv", grade:"pd", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv12", uname:"카카오TV", msg:"안녕하세요 전 카카오TV PD입니다.<img src='" + resourceLink + "emoticon/2200001/thum_007.png' alt='' class='kakaotv_emoticon'>" },
                { type:"star", broadtype:"kakaotv", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", cls:"support_area support_type2", uid:"kakaotv13", uname:"카카오TV", msg:"카카오TV 후원 메시지입니다.", value:10, join:0 },
                
                { type:"chat", broadtype:"afreecatv", grade:"top", quick:"quick", support:"", gender:"m", agent:"pc", uid:"afreecatv22", uname:"열혈팬닉네임", msg:"안녕하세요. 아프리카 도우미 입니다./사랑/" },
                { type:"chat", broadtype:"afreecatv", grade:"non", quick:"", support:"", gender:"w", agent:"m", uid:"afreecatv23", uname:"일반닉네임", msg:"아프리카 채팅창 및 알림이 표시되지 않을 경우" },
                { type:"chat", broadtype:"afreecatv", grade:"fan", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv21", uname:"서포터닉네임", msg:"비밀번호 방송시 아프리카도우미 아이디 설정에도 방송 비밀번호 설정를 설정해주시고" },
                { type:"chat", broadtype:"afreecatv", grade:"mng", quick:"", support:"sup", gender:"m", agent:"pc", uid:"afreecatv25", uname:"매니저닉네임", msg:"아프리카 프릭샷 및 외부장치 방송속성에 방송숨김설정 체크를 해제해주세요./사랑/" },
                { type:"sticker", broadtype:"afreecatv", grade:"gift", quick:"", support:"", gender:"m", agent:"pc", relay:"main", uid:"afreecatv24", uname:"아프리카", msg:"아프리카님이 스티커 100개를 선물했습니다!", paper:1, value:100, join:100 },
                
                { type:"chat", broadtype:"twitch", grade:{}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch21", uname:"트위치닉네임", msg:"트위치 채팅 내용입니다." },
                { type:"chat", broadtype:"twitch", grade:{"moderator":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch22", uname:"트위치닉네임", msg:"안녕하세요 전 트위치 관리자입니다.<img src='//static-cdn.jtvnw.net/emoticons/v1/86/1.0' srcset='//static-cdn.jtvnw.net/emoticons/v1/86/2.0 2x' alt='BibleThump' class='emoticon icon'>" },
                { type:"star", broadtype:"twitch", grade:"gift", gifttype:"bits", quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch23", uname:"트위치", msg:"<img src='http://static-cdn.jtvnw.net/bits/light/animated/purple/2' alt='' class='icon'> 트위치님의 응원 메시지입니다!", img:"http://static-cdn.jtvnw.net/bits/light/animated/purple/2", color:"#9c3ee8", value:100, join:0 },
                
                { type:"chat", broadtype:"youtube", grade:"", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube21", uname:"유튜브닉네임", msg:"안녕하세요. 아프리카도우미 유튜브 채팅입니다." },
                { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube22", uname:"유튜브닉네임", msg:"유튜브 채팅창 및 알림이 표시되지 않을 경우 유튜브 아이디 연동 갱신 및 설정도움말의 주의사항을 확인해주세요." },
                
                { type:"chat", broadtype:"afreecatv", grade:"police", quick:"", support:"", gender:"m", agent:"pc", uid:"", uname:"", msg:"폴리스 채팅 메시지 매너채팅 부탁드립니다!" },
                { type:"choco", broadtype:"afreecatv", grade:"gift", quick:"", support:"", gender:"m", agent:"pc", relay:"main", uid:"afreecatv31", uname:"아프리카", msg:"아프리카님이 초콜릿 100개를 선물했습니다!", value:100, join:0 },
                { type:"chat", broadtype:"afreecatv", grade:"top", quick:"quick", support:"sup", gender:"w", agent:"pc", uid:"afreecatv32", uname:"열혈팬닉네임", msg:"즐거운 방송되세요!" },
                { type:"chat", broadtype:"afreecatv", grade:"non", quick:"", support:"", gender:"m", agent:"pc", uid:"afreecatv33", uname:"일반닉네임", msg:"안녕히가세요!" },
                
                { type:"chat", broadtype:"twitch", grade:{"subscriber":1, "bits":100}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch31", uname:"트위치닉네임", msg:"트위치 채팅도 추가됐습니다." },
                { type:"chat", broadtype:"twitch", grade:{"staff":1}, quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch32", uname:"트위치닉네임", msg:"채팅창 설정의 장치구분 아이콘 표시 사용시 권한 아이콘이 표시됩니다." },
                { type:"star", broadtype:"twitch", grade:"gift", gifttype:"bits", quick:"none", support:"none", gender:"none", agent:"none", uid:"twitch33", uname:"트위치", msg:"<img src='http://static-cdn.jtvnw.net/bits/light/animated/green/2' alt='' class='icon'> 트위치님의 응원 메시지입니다!", img:"http://static-cdn.jtvnw.net/bits/light/animated/green/2", color:"#1db2a5", value:1000, join:0 },
                
                { type:"chat", broadtype:"youtube", grade:"", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube31", uname:"유튜브닉네임", msg:"유튜브 채팅 내용입니다." },
                { type:"chat", broadtype:"youtube", grade:"sponsor", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube32", uname:"유튜브닉네임", msg:"안녕하세요 전 유튜브 스폰서입니다." },
                { type:"star", broadtype:"youtube", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"youtube33", uname:"유튜브닉네임", msg:"유튜브 슈퍼채팅 후원입니다.", value:"€10", display:"€10", unit:"", join:0 },
                
                { type:"chat", broadtype:"kakaotv", grade:"", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv31", uname:"카카오TV", msg:"카카오TV 채팅창 및 알림이 표시되지 않을 경우 채널 아이디 설정이 올바른지 확인해주시고, 터프방송 및 비번방은 연동이 불가능합니다." },
                { type:"chat", broadtype:"kakaotv", grade:"ad", quick:"none", support:"none", gender:"none", agent:"none", uid:"kakaotv32", uname:"카카오TV", msg:"안녕하세요<img src='" + resourceLink + "emoticon/2200001/thum_001.png' alt='' class='kakaotv_emoticon'> 전 카카오TV 관리자입니다." },
                { type:"star", broadtype:"kakaotv", grade:"gift", quick:"none", support:"none", gender:"none", agent:"none", cls:"support_area support_type4", uid:"kakaotv33", uname:"카카오TV", msg:"카카오TV 후원 메시지입니다.", value:100, join:0 }
            ]
        },
        "data":{"tabname":"아프리카테마","mouseover":true,"split":false,"splitlist":["afreecatv"],"afreecatv":true,"twitch":false,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":true,"facebook":false,"facebookprofile":true,"youtubeprofile":true,"colortwid":"#ffffff","colortwchat":"#ffffff","colorytid":"#ffffff","colorytchat":"#ffffff","colorkaid":"#ffffff","colorkachat":"#ffffff","colornaid":"#ffffff","colornachat":"#ffffff","colorfaid":"#ffffff","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"afreeca","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeIn","speed":"200","bulletspeed":"15","scroll":false,"id":true,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":false,"align":false,"fadeIn":false,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"NotoSansKR","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ffffff","colorbjchat":"#ffffff","colormng":"#ffffff","colormngchat":"#ffffff","colortop":"#ffffff","colortopchat":"#ffffff","colorfan":"#ffffff","colorfanchat":"#ffffff","colorsup":"#ffffff","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":true,"afreecagender":true,"afreecaagent":true,"afreecabj":true,"afreecamanager":true,"afreecatop":true,"afreecafan":true,"afreecasup":true,"afreecaquick":true,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":false,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_enter","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data1":{"tabname":"트위치테마","mouseover":true,"split":false,"splitlist":["twitch","afreecatv"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeInUp","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":true,"autoeach":true,"autotime":10,"filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":false,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data2":{"tabname":"카카오톡테마","mouseover":true,"split":false,"splitlist":["afreecatv","twitch"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#000000","colortwchat":"#000000","colorytid":"#000000","colorytchat":"#000000","colorkaid":"#000000","colorkachat":"#000000","colornaid":"#000000","colornachat":"#000000","colorfaid":"#000000","colorfachat":"#000000","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"kakaotalk","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeInUp","speed":"200","bulletspeed":"15","scroll":false,"id":true,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":false,"align":false,"fadeIn":false,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(255,255,255,.2)","shadowsize":"2","bgtrans":true,"colorbg":"rgba(155,186,216,0.8)","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#000000","colorbjchat":"#000000","colormng":"#000000","colormngchat":"#000000","colortop":"#000000","colortopchat":"#000000","colorfan":"#000000","colorfanchat":"#000000","colorsup":"#000000","colorsupchat":"#000000","colornon":"#000000","colornonchat":"#000000","colornotice":"#ffffff","colorgift":"#ffffff","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_enter","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data3":{"tabname":"모터그래프테마","mouseover":true,"split":false,"splitlist":["afreecatv","twitch"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#ffffff","colortwchat":"#fdf3dc","colorytid":"#ffffff","colorytchat":"#fdf3dc","colorkaid":"#ffffff","colorkachat":"#fdf3dc","colornaid":"#ffffff","colornachat":"#fdf3dc","colorfaid":"#ffffff","colorfachat":"#fdf3dc","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"motor","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeIn","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":false,"align":false,"fadeIn":false,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Jeju Gothic","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ffffff","colorbjchat":"#fdf3dc","colormng":"#ffffff","colormngchat":"#fdf3dc","colortop":"#ffffff","colortopchat":"#fdf3dc","colorfan":"#ffffff","colorfanchat":"#fdf3dc","colorsup":"#ffffff","colorsupchat":"#fdf3dc","colornon":"#ffffff","colornonchat":"#fdf3dc","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":false,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":true,"widgetuserlayout":"widget_user_bottom","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_enter","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data4":{"tabname":"이모티콘테마","mouseover":true,"split":false,"splitlist":["afreecatv","twitch"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","speech":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"emoticon","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeIn","speed":"400","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":false,"autohide":true,"autoeach":true,"autotime":"10","filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":true,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"giftshow":false,"giftfix":false,"giftmin":"1","gifttime":"3","widgetuser":false,"widgetuserlayout":"widget_user_bottom","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","navertv":false,"navertvprofile":false,"colornaid":"#00c73c","colornachat":"#ffffff","afreecafollow":true,"chatalign":"item_chat_enter","facebook":false,"facebookprofile":false,"colorfaid":"#3b5998","colorfachat":"#ffffff","speechcancel":false,"outline":false,"outlinewidth":"1","coloroutline":"rgba(0,0,0,0.8)","chatsetup":false,"gifton":true,"shadowsize":"2","speechsp":true,"joinvolume":"50","joinrate":"1.0","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinexcept":"","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data5":{"tabname":"풍선테마","mouseover":true,"split":false,"splitlist":["afreecatv","twitch"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"bubble","customstyle":false,"customstylecss":"","customcss":"","effect":"none","speed":"400","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data6":{"tabname":"네온사인테마","mouseover":true,"split":false,"splitlist":["afreecatv","twitch"],"afreecatv":true,"twitch":true,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"neon","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeIn","speed":"400","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"NanumSquareRound","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data7":{"tabname":"탄막효과","mouseover":true,"split":false,"splitlist":["afreecatv","twitch","youtube","kakaotv"],"afreecatv":true,"twitch":true,"youtube":true,"kakaotv":true,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"bullet","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"none","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":false,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":"16","fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":false,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data8":{"tabname":"구름효과","mouseover":true,"split":false,"splitlist":["afreecatv","twitch","youtube","kakaotv"],"afreecatv":true,"twitch":true,"youtube":true,"kakaotv":true,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"cloud","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"none","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":false,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":"16","fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":false,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":false,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data9":{"tabname":"채팅분할","mouseover":true,"split":true,"splitlist":["afreecatv","twitch","youtube"],"afreecatv":true,"twitch":true,"youtube":true,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeInUp","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":false,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":false,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data10":{"tabname":"다양한기능","mouseover":true,"split":false,"splitlist":["afreecatv","twitch","youtube","kakaotv"],"afreecatv":true,"twitch":true,"youtube":true,"kakaotv":true,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":true,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#3b5998","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeInUp","speed":"200","bulletspeed":"15","scroll":false,"id":false,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":true,"autoeach":true,"autotime":10,"filter":false,"filterword":"","font":"Daum","fontsize":18,"fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":5,"chatsetup":true,"widgetuser":true,"widgetuserlayout":"widget_user_bottom","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":true,"afreecagender":true,"afreecaagent":true,"afreecabj":true,"afreecamanager":true,"afreecatop":true,"afreecafan":true,"afreecasup":true,"afreecaquick":true,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":true,"twitchturbo":true,"twitchpremium":true,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":true,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":true,"jointype":"text","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":true,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_normal","bulletalign":"left","translate":true,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true},
        "data11":{"tabname":"골드라이브","mouseover":true,"split":false,"splitlist":["goldlive","afreecatv"],"afreecatv":true,"twitch":false,"youtube":false,"kakaotv":false,"chatsimple":true,"navertv":false,"navertvprofile":false,"facebook":false,"facebookprofile":false,"youtubeprofile":false,"colortwid":"#7b60bd","colortwchat":"#ffffff","colorytid":"#e62117","colorytchat":"#ffffff","colorkaid":"#fec82f","colorkachat":"#ffffff","colornaid":"#00c73c","colornachat":"#ffffff","colorfaid":"#d4d4d4","colorfachat":"#ffffff","speech":false,"speechsp":false,"speechtext":"{닉네임}님이 {채팅}","speechvolume":"50","speechrate":"1.0","speechtype":"voice","speechsound":["chatmsg.mp3","http://afreehp.kr/voice/upload/default/chatmsg.mp3"],"speechcancel":false,"speechme":false,"speechgrade":false,"name":"","type":"normal","opacity":"0","ice":"all","theme":"twitch","customstyle":false,"customstylecss":"","customcss":"","effect":"fadeInUp","speed":"200","bulletspeed":"15","scroll":false,"id":true,"nick":false,"enter":false,"gender":false,"agent":false,"grade":false,"random":true,"align":false,"fadeIn":true,"autohide":false,"autoeach":true,"autotime":"30","filter":false,"filterword":"","font":"Daum","fontsize":"18","fontbold":false,"shadow":true,"colorshadow":"rgba(0,0,0,0.8)","shadowsize":"2","bgtrans":false,"colorbg":"#000000","bgimg":true,"bgimgzoom":false,"image":[],"colorbj":"#ef391c","colorbjchat":"#ffffff","colormng":"#686fd2","colormngchat":"#ffffff","colortop":"#e15277","colortopchat":"#ffffff","colorfan":"#60aa35","colorfanchat":"#ffffff","colorsup":"#a772dc","colorsupchat":"#ffffff","colornon":"#ffffff","colornonchat":"#ffffff","colornotice":"#ffffff","colorgift":"#ffe000","replace":false,"replaceword":[],"gifton":true,"giftshow":true,"giftfix":false,"giftmin":"1","gifttime":"3","chatsetup":false,"widgetuser":false,"widgetuserlayout":"","addfonturl":"","addfontname":"","broadicon":false,"filterid":false,"filteridlist":"","afreecafollow":false,"afreecagender":false,"afreecaagent":false,"afreecabj":true,"afreecamanager":true,"afreecatop":false,"afreecafan":false,"afreecasup":false,"afreecaquick":false,"twitchadmin":true,"twitchbroadcaster":true,"twitchmoderator":true,"twitchbits":false,"twitchturbo":false,"twitchpremium":false,"twitchsubscriber":true,"youtubeowner":true,"youtubemoderator":true,"youtubesponsor":false,"kakaotvpd":true,"kakaotvad":true,"speechcommand":false,"speechcommandtext":"!알림","joinvoice":false,"jointype":"voice","jointext":"{닉네임}님 어서오세요","joinvolume":"50","joinrate":"1.0","joinexcept":"","widgetvote":false,"widgetvotecolorbg":"#dddddd","widgetvotecolor":"#ff8a00","widgetvotecolorfont":"#FFFFFF","widgetvotetime":"30","widgetvotenum":"3","widgetvoteprocess":true,"widgetvotealign":false,"widgetvotecmd":"","chatalign":"item_chat_enter","bulletalign":"left","translate":false,"twcolor":false,"relaychat":false,"clocknow":false,"clockchar":true,"goldlive":true,"goldlivefan":true,"goldlivemng":true,"goldlivebj":true},
        loaddata: {},
        theme:{
            twitch: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"none",
                id:false,
                enter:false,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:true,
                align:false,
                fade:true,
                autohide:false,
                font:"Daum",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ef391c",
                colorbjchat:"#ffffff",
                colormng:"#686fd2",
                colormngchat:"#ffffff",
                colortop:"#e15277",
                colortopchat:"#ffffff",
                colorfan:"#60aa35",
                colorfanchat:"#ffffff",
                colorsup:"#a772dc",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#7b60bd",
                colortwchat: "#ffffff",
                colorytid: "#e62117",
                colorytchat: "#ffffff",
                colorkaid: "#fec82f",
                colorkachat: "#ffffff",
                colornaid: "#00c73c",
                colornachat: "#ffffff",
                colorfaid:"#3b5998",
                colorfachat:"#ffffff"
            },
            afreeca: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                id:true,
                enter:true,
                afreecafollow: true, afreecagender: true, afreecaagent: true, afreecabj: true, afreecamanager: true, afreecatop: true, afreecafan: true, afreecasup: true, afreecaquick: true,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: true, twitchturbo: true, twitchpremium: true, twitcbadgeetc: true, twitchsubscriber: true,
                youtubeprofile: true, youtubeowner: true, youtubemoderator: true, youtubesponsor: true,
                kakaotvpd: true, kakaotvad: true, navertvprofile: true, facebookprofile: true, 
                random:false,
                align:false,
                fade:false,
                chatalign:"item_chat_enter",
                autohide:false,
                font:"NotoSansKR",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ffffff",
                colorbjchat:"#ffffff",
                colormng:"#ffffff",
                colormngchat:"#ffffff",
                colortop:"#ffffff",
                colortopchat:"#ffffff",
                colorfan:"#ffffff",
                colorfanchat:"#ffffff",
                colorsup:"#ffffff",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid:"#ffffff",
                colortwchat:"#ffffff",
                colorytid:"#ffffff",
                colorytchat:"#ffffff",
                colorkaid:"#ffffff",
                colorkachat:"#ffffff",
                colornaid: "#ffffff",
                colornachat: "#ffffff",
                colorfaid:"#ffffff",
                colorfachat:"#ffffff"
            },
            board: {
                opacity:20,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                id:false,
                enter:false,
                align:false,
                fade:true,
                autohide:false,
                font:"Daum",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:true,
                bgimgzoom:true,
                image:[["board.png","http://i.imgur.com/jpqUrqr.png"]],
                colorbj:"#ef391c",
                colorbjchat:"#ffffff",
                colormng:"#686fd2",
                colormngchat:"#ffffff",
                colortop:"#e15277",
                colortopchat:"#ffffff",
                colorfan:"#60aa35",
                colorfanchat:"#ffffff",
                colorsup:"#a772dc",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#7b60bd",
                colortwchat: "#ffffff",
                colorytid: "#e62117",
                colorytchat: "#ffffff",
                colorkaid: "#fec82f",
                colorkachat: "#ffffff",
                colornaid: "#00c73c",
                colornachat: "#ffffff",
                colorfaid:"#3b5998",
                colorfachat:"#ffffff"
            },
            kakaotalk: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeInUp",
                id:true,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:false,
                align:false,
                fade:false,
                chatalign:"item_chat_enter",
                autohide:false,
                font:"Daum",
                shadow:true,
                colorshadow:"rgba(255,255,255,.2)",
                shadowsize:2,
                bgtrans:true,
                colorbg:"rgba(155,186,216,0.8)",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#000000",
                colorbjchat:"#000000",
                colormng:"#000000",
                colormngchat:"#000000",
                colortop:"#000000",
                colortopchat:"#000000",
                colorfan:"#000000",
                colorfanchat:"#000000",
                colorsup:"#000000",
                colorsupchat:"#000000",
                colornon:"#000000",
                colornonchat:"#000000",
                colornotice:"#ffffff",
                colorgift:"#ffffff",
                colortwid:"#000000",
                colortwchat:"#000000",
                colorytid:"#000000",
                colorytchat:"#000000",
                colorkaid:"#000000",
                colorkachat:"#000000",
                colornaid: "#000000",
                colornachat: "#000000",
                colorfaid:"#000000",
                colorfachat:"#000000"
            },
            motor: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"none",
                id:false,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false,
                random:false,
                align:false,
                fade:false,
                chatalign:"item_chat_normal",
                autohide:false,
                gifton:true,
                giftshow:false,
                //giftfix:false,
                font:"Jeju Gothic",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ffffff",
                colorbjchat:"#fdf3dc",
                colormng:"#ffffff",
                colormngchat:"#fdf3dc",
                colortop:"#ffffff",
                colortopchat:"#fdf3dc",
                colorfan:"#ffffff",
                colorfanchat:"#fdf3dc",
                colorsup:"#ffffff",
                colorsupchat:"#fdf3dc",
                colornon:"#ffffff",
                colornonchat:"#fdf3dc",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#ffffff",
                colortwchat: "#fdf3dc",
                colorytid: "#ffffff",
                colorytchat: "#fdf3dc",
                colorkaid: "#ffffff",
                colorkachat: "#fdf3dc",
                colornaid: "#ffffff",
                colornachat: "#fdf3dc",
                colorfaid:"#ffffff",
                colorfachat:"#fdf3dc"
            },
            emoticon: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                id:false,
                enter:false,
                afreecafollow: true, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:true,
                align:false,
                fade:false,
                autohide:true,
                autoeach:true,
                autotime:10,
                font:"Daum",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ef391c",
                colorbjchat:"#ffffff",
                colormng:"#686fd2",
                colormngchat:"#ffffff",
                colortop:"#e15277",
                colortopchat:"#ffffff",
                colorfan:"#60aa35",
                colorfanchat:"#ffffff",
                colorsup:"#a772dc",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#7b60bd",
                colortwchat: "#ffffff",
                colorytid: "#e62117",
                colorytchat: "#ffffff",
                colorkaid: "#fec82f",
                colorkachat: "#ffffff",
                colornaid: "#00c73c",
                colornachat: "#ffffff",
                colorfaid:"#3b5998",
                colorfachat:"#ffffff"
            },
            bubble: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"none",
                speed:400,
                id:false,
                enter:false,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:true,
                align:false,
                fade:true,
                autohide:false,
                font:"Daum",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                scroll:false,
                colorbj:"#ef391c",
                colorbjchat:"#ffffff",
                colormng:"#686fd2",
                colormngchat:"#ffffff",
                colortop:"#e15277",
                colortopchat:"#ffffff",
                colorfan:"#60aa35",
                colorfanchat:"#ffffff",
                colorsup:"#a772dc",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#7b60bd",
                colortwchat: "#ffffff",
                colorytid: "#e62117",
                colorytchat: "#ffffff",
                colorkaid: "#fec82f",
                colorkachat: "#ffffff",
                colornaid: "#00c73c",
                colornachat: "#ffffff",
                colorfaid:"#3b5998",
                colorfachat:"#ffffff"
            },
            neon: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                speed:400,
                id:false,
                enter:false,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:true,
                align:false,
                fade:true,
                autohide:false,
                font:"NanumSquareRound",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ef391c",
                colorbjchat:"#ffffff",
                colormng:"#686fd2",
                colormngchat:"#ffffff",
                colortop:"#e15277",
                colortopchat:"#ffffff",
                colorfan:"#60aa35",
                colorfanchat:"#ffffff",
                colorsup:"#a772dc",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid: "#7b60bd",
                colortwchat: "#ffffff",
                colorytid: "#e62117",
                colorytchat: "#ffffff",
                colorkaid: "#fec82f",
                colorkachat: "#ffffff",
                colornaid: "#00c73c",
                colornachat: "#ffffff",
                colorfaid:"#3b5998",
                colorfachat:"#ffffff"
            },
            cat: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeInUp",
                speed:300,
                id:false,
                enter:false,
                afreecafollow: false, afreecagender: false, afreecaagent: false, afreecabj: true, afreecamanager: true, afreecatop: false, afreecafan: false, afreecasup: false, afreecaquick: false,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: false, twitchturbo: false, twitchpremium: false, twitcbadgeetc: false, twitchsubscriber: true,
                youtubeprofile: false, youtubeowner: true, youtubemoderator: true, youtubesponsor: false,
                kakaotvpd: true, kakaotvad: true, navertvprofile: false, facebookprofile: false, 
                random:false,
                align:false,
                fade:false,
                autohide:false,
                font:"YanolJaYache",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ffffff",
                colorbjchat:"#ffffff",
                colormng:"#ffffff",
                colormngchat:"#ffffff",
                colortop:"#ffffff",
                colortopchat:"#ffffff",
                colorfan:"#ffffff",
                colorfanchat:"#ffffff",
                colorsup:"#ffffff",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffffff",
                colortwid: "#ffffff",
                colortwchat: "#ffffff",
                colorytid: "#ffffff",
                colorytchat: "#ffffff",
                colorkaid: "#ffffff",
                colorkachat: "#ffffff",
                colornaid: "#ffffff",
                colornachat: "#ffffff",
                colorfaid:"#ffffff",
                colorfachat:"#ffffff"
            },
            box: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                id:true,
                enter:true,
                afreecafollow: true, afreecagender: true, afreecaagent: true, afreecabj: true, afreecamanager: true, afreecatop: true, afreecafan: true, afreecasup: true, afreecaquick: true,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: true, twitchturbo: true, twitchpremium: true, twitcbadgeetc: true, twitchsubscriber: true,
                youtubeprofile: true, youtubeowner: true, youtubemoderator: true, youtubesponsor: true,
                kakaotvpd: true, kakaotvad: true, navertvprofile: true, facebookprofile: true, 
                random:false,
                align:false,
                fade:false,
                chatalign:"item_chat_enter",
                autohide:false,
                font:"NotoSansKR",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ffffff",
                colorbjchat:"#ffffff",
                colormng:"#ffffff",
                colormngchat:"#ffffff",
                colortop:"#ffffff",
                colortopchat:"#ffffff",
                colorfan:"#ffffff",
                colorfanchat:"#ffffff",
                colorsup:"#ffffff",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid:"#ffffff",
                colortwchat:"#ffffff",
                colorytid:"#ffffff",
                colorytchat:"#ffffff",
                colorkaid:"#ffffff",
                colorkachat:"#ffffff",
                colornaid: "#ffffff",
                colornachat: "#ffffff",
                colorfaid:"#ffffff",
                colorfachat:"#ffffff"
            },
            boxround: {
                opacity:0,
                customstyle:false,
                customstylecss:"",
                effect:"fadeIn",
                id:true,
                enter:true,
                afreecafollow: true, afreecagender: true, afreecaagent: true, afreecabj: true, afreecamanager: true, afreecatop: true, afreecafan: true, afreecasup: true, afreecaquick: true,
                twitchadmin: true, twitchbroadcaster: true, twitchmoderator: true, twitchbits: true, twitchturbo: true, twitchpremium: true, twitcbadgeetc: true, twitchsubscriber: true,
                youtubeprofile: true, youtubeowner: true, youtubemoderator: true, youtubesponsor: true,
                kakaotvpd: true, kakaotvad: true, navertvprofile: true, facebookprofile: true, 
                random:false,
                align:false,
                fade:false,
                chatalign:"item_chat_enter",
                autohide:false,
                font:"NotoSansKR",
                shadow:true,
                colorshadow:"rgba(0,0,0,0.8)",
                shadowsize:2,
                bgtrans:false,
                colorbg:"#000000",
                bgimg:false,
                bgimgzoom:false,
                image:[],
                colorbj:"#ffffff",
                colorbjchat:"#ffffff",
                colormng:"#ffffff",
                colormngchat:"#ffffff",
                colortop:"#ffffff",
                colortopchat:"#ffffff",
                colorfan:"#ffffff",
                colorfanchat:"#ffffff",
                colorsup:"#ffffff",
                colorsupchat:"#ffffff",
                colornon:"#ffffff",
                colornonchat:"#ffffff",
                colornotice:"#ffffff",
                colorgift:"#ffe000",
                colortwid:"#ffffff",
                colortwchat:"#ffffff",
                colorytid:"#ffffff",
                colorytchat:"#ffffff",
                colorkaid:"#ffffff",
                colorkachat:"#ffffff",
                colornaid: "#ffffff",
                colornachat: "#ffffff",
                colorfaid:"#ffffff",
                colorfachat:"#ffffff"
            }
        },
        init: function() {
            var chatOpt = sub.chat.opt;
            var chatResizeInterval = null;
            chatOpt.box = $("#item_chat");
            chatOpt.area = $("#item_chat .item_area").get(0);
            
            var chatFontInterval = null;
            chatResize = function() {
                if(pageType == "setup") {
                    var loadData = sub.chat.loaddata;
                }
                else {
                    clearTimeout(chatFontInterval);
                    var loadData = sub.chat.data;
                    chatFontInterval = setTimeout(function() {
                        sub.chat.scroll.bottom(true,true);
                    }, 1000);
                }
                
                var getBoxWidthChange = false;
                chatOpt.target = chatOpt.box.find(".chat_list:eq(0)");
                chatOpt.len = chatOpt.data.length;
                //chatOpt.max = parseInt(chatOpt.box.height() / 20 + 4, 10);
                var getChatWidth = chatOpt.box.width();
                if(getChatWidth != chatOpt.boxwidth) getBoxWidthChange = true;
                chatOpt.boxwidth = getChatWidth;
                getBulletWidth = getChatWidth * 2;
                
                if(loadData.type == "bullet") {
                    $("head .item_chat_bulletstart").remove();
                    $("head").append("<style class='item_chat_bulletstart'>.item_chat.bullet .chat_list li{transform:translateX(" + (loadData.bulletalign != undefined && loadData.bulletalign == "right" ? "-" : "") + getChatWidth + "px)}</style>");
                }
                
                $("#item_chat").removeClass("multiline");
                if(loadData.widgetuser == true) {
                    if(getChatWidth < 500 && $("#item_chat").hasClass("user6")) {
                        $("#item_chat").addClass("multiline");
                    }
                    else if(getChatWidth < 400 && $("#item_chat").hasClass("user5")) {
                        $("#item_chat").addClass("multiline");
                    }
                }
                
                //이모티콘 마진 넓이
                var getEmoticonIdx = 3;
                if(getChatWidth < 400) getEmoticonIdx = 2;
                sub.chat.emoticon.minwidth = parseInt(getChatWidth / getEmoticonIdx, 10);
                if(sub.chat.emoticon.minwidth < 150) {
                    sub.chat.emoticon.minwidth = 150;
                }
                else if(sub.chat.emoticon.minwidth > 300) {
                    sub.chat.emoticon.minwidth = 350;
                }
                sub.chat.emoticon.maxwidth = sub.chat.emoticon.minwidth + (getEmoticonIdx == 2 ? 100 : 150);
                
                sub.chat.emoticon.right = parseInt(100 - (sub.chat.emoticon.minwidth / getChatWidth * 100), 10);
                if(sub.chat.emoticon.right < 50) {
                    sub.chat.emoticon.right = 50;
                }
                sub.chat.emoticon.margin = getChatWidth / 100;
                
                $("head .item_emoticon_chat").remove();
                $("head").append("<style class='item_emoticon_chat'>#item_chat.item_chat.chat_theme_emoticon .chat_list li.emochat{min-width:" + sub.chat.emoticon.minwidth + "px;max-width:" + sub.chat.emoticon.maxwidth + "px}</style>");
                
                if(getBoxWidthChange === true) {
                    sub.chat.notice.resize();
                    sub.chat.clock.resize();
                }
            }
            
            $(window).on("resize", function() {
                clearTimeout(chatResizeInterval);
                chatResizeInterval = setTimeout(function() {
                    chatResize();
                }, 100);
            });
            chatResize();
            sub.chat.scroll.init();
                
            //설정
            if(pageType == "setup") {
                //설정 불러오기
                page.setup.load("chat");
                
                chatOpt.target = chatOpt.box.find(".chat_list:eq(0)");
                chatOpt.len = chatOpt.data.length;
                //chatOpt.max = parseInt(chatOpt.box.height() / 20 + 4, 10);
                
                //채팅 예제
                function chatAddRun(type) {
                    setTimeout(function() {
                        var getChatData = jQuery.extend(true, {}, chatOpt.data[chatOpt.idx]);
                        if((getChatData.broadtype == "afreecatv" && sub.chat.loaddata.afreecatv != undefined && sub.chat.loaddata.afreecatv == true) || (getChatData.broadtype == "twitch" && sub.chat.loaddata.twitch != undefined && sub.chat.loaddata.twitch == true) || (getChatData.broadtype == "youtube" && sub.chat.loaddata.youtube != undefined && sub.chat.loaddata.youtube == true) || (getChatData.broadtype == "kakaotv" && sub.chat.loaddata.kakaotv != undefined && sub.chat.loaddata.kakaotv == true)) {
                            if(getChatData.uid == "translate" && sub.chat.loaddata.translate !== true) {
                                chatAddRun(true);
                            }
                            else {
                                sub.chat.add(getChatData);
                                chatAddRun(false);
                            }
                        }
                        else chatAddRun(true);
                        
                        chatOpt.idx += 1;
                        if(chatOpt.idx == chatOpt.len) chatOpt.idx = 0;
                    }, type == true ? 0 : (sub.chat.loaddata.type == "normal" ? 1000 : 500));
                }
                chatAddRun(false);
                
                // setTimeout(function() {
                    // for(var i=0;i<24;i++) {
                        // chatAddRun(true);
                    // }
                // }, 2000);
                
                //음성
                var bttnVoiceCheck = true;
                $(".btn_voice_play").on("click", function() {
                    if(bttnVoiceCheck == false) return false;
                    bttnVoiceCheck = false;
                    setTimeout(function() {
                        bttnVoiceCheck = true;
                    }, 3000);
                    setTimeout(function() {
                        sub.chat.voice();
                    }, 100);
                    return false;
                });
                
                //인사
                var bttnJoinCheck = true;
                $(".btn_join_play").on("click", function() {
                    if(bttnJoinCheck == false) return false;
                    bttnJoinCheck = false;
                    setTimeout(function() {
                        bttnJoinCheck = true;
                    }, 3000);
                    setTimeout(function() {
                        chatJoinData["afreecatv"] = 0;
                        sub.chat.joinvoice({broad:"afreecatv", uid:"afreecatv", uname:"시청자"});
                    }, 100);
                    return false;
                });
                
                $("#item_chat .widget_user .user_box .value").html("1,000");
                $("#item_chat .widget_user .user_box.total .value").html("10,000");
                
                //채팅창 분할 표시
                var chatSplitInterval = null;
                $(".chat_broadcast_type .check, [name='item_chat_split']").on("click", function() {
                    clearTimeout(chatSplitInterval);
                    chatSplitInterval = setTimeout(function() {
                        sub.chat.splitlist();
                    }, 300);
                });
                
                //채팅 테마 선택
                $("[name='item_chat_theme']").on("change", function() {
                    if(sub.chat.loaddata.theme != this.value) {
                        sub.chat.loaddata.customstylecss = "";
                    }
                });
                
                //투표 시간 표시
                function voteTimeRun() {
                    var getVoteTime = $("[name='item_chat_widgetvotetime']").val() * 1000;
                    $("#widget_vote .vote_time .time_bar").stop(true,true).width(0).css("opacity",0.2).animate({ width:"100%",opacity:1 }, getVoteTime, "linear", function() {
                        voteTimeRun();
                    });
                }
                
                //설정 명령
                $("#item_widget_notice").on("mouseup", function() {
                    doTimeout("item_widget_notice",function() {
                        if($("#item_widget_notice").hasClass("hide")) {
                            sub.chat.notice.load("!공지삭제");
                        }
                        else {
                            sub.chat.notice.load("!공지 BJ, 스트리머, 매니저 등 관리자 이상의 사용자가 채팅창 상단에 공지를 띄울 수 있습니다");
                        }
                    }, 300);
                });
                
                $("#item_widget_clock").on("mouseup", function() {
                    doTimeout("item_widget_clock",function() {
                        if($("#item_widget_clock").hasClass("hide")) {
                            sub.chat.clock.load("!시간삭제");
                        }
                        else {
                            sub.chat.clock.load("!시간/1분");
                        }
                    }, 300);
                });
                
                $("#item_widget_vote").on("mouseup", function() {
                    doTimeout("item_widget_vote",function() {
                        if($("#item_widget_vote").hasClass("hide")) {
                            $("#widget_vote").removeClass("show");
                            $("#widget_vote .vote_time .time_bar").stop(true,true).width(0);
                        }
                        else {
                            $("#widget_vote").addClass("show");
                            voteTimeRun();
                        }
                    }, 300);
                });
            }
            else {
                $("#tooltip_box .btn_chat_delete").addClass("show").on("click", function() {
                    $("#item_chat .chat_list:eq(0)").empty();
                    return false;
                });
                
                //투표 설정
                $("#widget_vote .btn_vote_start").on("click", function() {
                    sub.chat.vote.load("!투표시작");
                    return false;
                });
                $("#widget_vote .btn_vote_end").on("click", function() {
                    sub.chat.vote.load("!투표종료");
                    return false;
                });
                $("#widget_vote .btn_vote_delete").on("click", function() {
                    sub.chat.vote.load("!투표삭제");
                    return false;
                });
                
                //채팅 저장
                //sub.chat.chatlog();
                
                //채팅입력
                sub.chat.inputchat();
            }
            
            //선물 고정 클릭 취소
            chatOpt.target.on("click",".gift_fix.gift_show", function() {
                $(this).removeClass("gift_show");
            });
            
            //사운드 설정
            html5AudioCheck = html5AudioSupport();
            sub.chat.soundsetup(false);
        },
        previewchat: function(type) {
            var chatOpt = sub.chat.opt;
            if((sub.chat.data.afreecatv != undefined && sub.chat.data.afreecatv == true) || (sub.chat.data.twitch != undefined && sub.chat.data.twitch == true) || (sub.chat.data.youtube != undefined && sub.chat.data.youtube == true) || (sub.chat.data.kakaotv != undefined && sub.chat.data.kakaotv == true) || (sub.chat.data.facebook != undefined && sub.chat.data.facebook == true) || (sub.chat.data.navertv != undefined && sub.chat.data.navertv == true)) {
                if(type === true) {
                    if(chatOpt.connect === false) {
                        var resetIdx = 0;
                        chatOpt.len = chatOpt.previewdata.length;
                        function chatAddRun(type) {
                            doTimeout("previewchat", function() {
                                if(chatOpt.connect === false) {
                                    var getChatData = jQuery.extend(true, {}, chatOpt.previewdata[chatOpt.idx]);
                                    if((getChatData.broadtype == "afreecatv" && sub.chat.data.afreecatv != undefined && sub.chat.data.afreecatv == true) || (getChatData.broadtype == "youtube" && sub.chat.data.youtube != undefined && sub.chat.data.youtube == true) || (getChatData.broadtype == "kakaotv" && sub.chat.data.kakaotv != undefined && sub.chat.data.kakaotv == true) || (getChatData.broadtype == "facebook" && sub.chat.data.facebook != undefined && sub.chat.data.facebook == true) || (getChatData.broadtype == "navertv" && sub.chat.data.navertv != undefined && sub.chat.data.navertv == true)) {
                                        getChatData.preview = true;
                                        sub.chat.add(getChatData);
                                        chatAddRun(false);
                                    }
                                    else chatAddRun(true);
                                    
                                    chatOpt.idx += 1;
                                    if(chatOpt.idx == chatOpt.len) {
                                        chatOpt.idx = 0;
                                        resetIdx += 1;
                                        if(resetIdx > 0) {
                                            doTimeout("previewchat", false);
                                        }
                                    }
                                }
                            }, type == true ? 0 : 1000);
                        }
                        chatAddRun(false);
                    }
                }
                else {
                    if(chatOpt.connect === false) {
                        $("#item_chat .chat_list:eq(0)").empty();
                    }
                    chatOpt.connect = true;
                }
            }
            else {
                //모든 방송 미설정 체크
                if((sub.chat.data.afreecatv === undefined || sub.chat.data.afreecatv === false) && (sub.chat.data.twitch === undefined || sub.chat.data.twitch === false) && (sub.chat.data.youtube === undefined || sub.chat.data.youtube === false) && (sub.chat.data.kakaotv === undefined || sub.chat.data.kakaotv === false) && (sub.chat.data.navertv === undefined || sub.chat.data.navertv === false) && (sub.chat.data.facebook === undefined || sub.chat.data.facebook === false) && (sub.chat.data.goldlive === undefined || sub.chat.data.goldlive === false)) {
                    sub.chat.previewinfo("afreehp", "nobroad");
                }
            }
        },
        previewinfo: function(broad, type) {
            var chatOpt = sub.chat.opt;
            var getChatData = {};
            if(broad === "youtube") {
                if(type === "private") {
                    var getChatData = { type:"chat", broadtype:"youtube", grade:"moderator", quick:"none", support:"none", gender:"none", agent:"none", profile:"../img/broadcaster.png", uid:"afreehp", uname:"아프리카도우미", msg:"유튜브가 비공개 상태입니다. 실시간 스트리밍 공개설정을 공개로 해주세요." };
                }
            }
            else if(broad === "afreehp") {
                if(type === "nobroad") {
                    var getChatData = { type:"chat", broadtype:"afreecatv", grade:"notice", quick:"", support:"", gender:"m", agent:"pc", uid:"", uname:"", msg:"연동된 방송이 없습니다. 아프리카도우미 연동 아이디 설정 및 채팅창 방송 종류 설정을 확인해주세요." };
                }
            }
            if(getChatData.type !== undefined) {
                getChatData.preview = true;
                sub.chat.add(getChatData);
            }
        },
        soundsetup: function(type) {
            if(type == true || (typeof soundManager !== "undefined" && typeof soundManager === "object")) {
                if(pageType == "setup") {
                    var loadData = sub.chat.loaddata;
                }
                else {
                    var loadData = sub.chat.data;
                }
                if(sub.debug) console.log("soundmanager setup", html5AudioCheck);

                //url 로 변경시 프릭샷에서 소리 안나옴
                soundManager.setup({
                    // url: fileLoadType == "cdn" ? "http://cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20150601/swf/soundmanager2_flash9.swf" : "resource/soundmanager2_flash9.swf",
                    url: "resource/soundmanager2_flash9.swf",
                    flashVersion: 9,
                    preferFlash: html5AudioCheck == true ? false : true,
                    volume: 50,
                    onready: function() {
                        sub.chat.opt.audio = soundManager.createSound({
                            onplay: function() {
                                if(sub.debug) console.log("sound play");
                                sub.chat.opt.speechcheck = false;
                                doTimeout("chat_speech_run",function() {
                                    if(pageType != "setup" && sub.chat.data.speechtype == "voice" && loadData.speechcancel == false) {
                                        sub.chat.voicenext();
                                    }
                                    else {
                                        sub.chat.opt.speechdata = [];
                                        sub.chat.opt.speechcheck = true;
                                    }
                                }, 5000);
                            },
                            onfinish: function() {
                                if(sub.debug) console.log("sound end");
                                sub.chat.opt.speechcheck = true;
                                doTimeout("chat_speech_run", false);
                                if(pageType != "setup" && sub.chat.data.speechtype == "voice" && loadData.speechcancel == false) {
                                    sub.chat.voicenext();
                                }
                                else {
                                    sub.chat.opt.speechdata = [];
                                    sub.chat.opt.speechcheck = true;
                                }
                            }
                        });
                    }
                });
            }
            else {
                if(sub.debug) console.log("soundmanager load");
                //$.getScript(fileLoadType == "cdn" ? "//cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20170601/script/soundmanager2-nodebug-jsmin.js" : "resource/soundmanager2-nodebug-jsmin.js", function() {
                $.getScript("resource/soundmanager2-nodebug-jsmin.js", function() {
                    sub.chat.soundsetup(true);
                });
            }
        },
        scroll: {
            interval: null,
            btnScrollBottom: null,
            init: function() {
                btnScrollBottom = $(".item_chat .btn_scroll_bottom");
                
                var mouseInterval = null;
                $(sub.chat.opt.area).on("scroll", function() {
                    clearTimeout(mouseInterval);
                    if(pageType == "setup") {
                        var loadData = sub.chat.loaddata;
                    }
                    else {
                        var loadData = sub.chat.data;
                    }
                    if(loadData.split == undefined || loadData.split == false) {
                        var getScrollTop = sub.chat.opt.area.scrollTop;
                        var getAreaHeight = $(sub.chat.opt.area).outerHeight();
                        var getScrollHeight = sub.chat.opt.area.scrollHeight;
                        if(loadData.scroll == true) {
                            if(getScrollTop + getAreaHeight < getScrollHeight - 60) {
                                if(sub.chat.opt.scroll) {
                                    btnScrollBottom.addClass("scroll");
                                    clearInterval(sub.chat.scroll.interval);
                                    sub.chat.scroll.interval = setTimeout(function() {
                                        sub.chat.scroll.bottom(true,true);
                                    }, 10 * 1000);
                                }
                                sub.chat.opt.scroll = false;
                            }
                            else {
                                sub.chat.opt.scroll = true;
                            }
                        }
                        else {
                            sub.chat.scroll.bottom(true,false);
                        }
                    }
                }).hover(
                    function() {
                        if(pageType == "setup") {
                            var loadData = sub.chat.loaddata;
                        }
                        else {
                            var loadData = sub.chat.data;
                        }
                        if(loadData.scroll == true && (loadData.split == undefined || loadData.split == false)) {
                            $(this).addClass("scroll");
                            
                            if(sub.chat.opt.scroll) {
                                setTimeout(function() {
                                    sub.chat.scroll.bottom(false,true);
                                }, 100);
                                sub.chat.scroll.bottom(false,false);
                            }
                        }
                    },
                    function() {
                        if(pageType == "setup") {
                            var loadData = sub.chat.loaddata;
                        }
                        else {
                            var loadData = sub.chat.data;
                        }
                        if(loadData.scroll == true) {
                            $(this).removeClass("scroll");
                            btnScrollBottom.removeClass("scroll");
                            //sub.chat.scroll.bottom();
                        }
                    }
                ).on("mousemove", function() {
                    if(pageType == "setup") {
                        var loadData = sub.chat.loaddata;
                    }
                    else {
                        var loadData = sub.chat.data;
                    }
                    if(loadData.scroll == true) {
                        clearTimeout(mouseInterval);
                        // if(loadData.mouseover == undefined || loadData.mouseover == true) {
                            // $(this).addClass("scroll");
                        // }
                        $(this).addClass("scroll");
                        mouseInterval = setTimeout(function() {
                            $(sub.chat.opt.area).removeClass("scroll");
                            btnScrollBottom.removeClass("scroll");
                        }, 2000);
                        
                        clearInterval(sub.chat.scroll.interval);
                        sub.chat.scroll.interval = setTimeout(function() {
                            sub.chat.scroll.bottom(true,true);
                        }, 10 * 1000);
                    }
                });
            },
            bottom: function(type,cls) {
                if(type) sub.chat.opt.scroll = true;
                clearInterval(sub.chat.scroll.interval);
                if(sub.chat.opt.area != null && $(sub.chat.opt.area).length > 0) {
                    if(cls) {
                        $(sub.chat.opt.area).removeClass("scroll");
                        btnScrollBottom.removeClass("scroll");
                    }
                    sub.chat.opt.area.scrollTop = sub.chat.opt.area.scrollHeight + 100;
                }
            }
        },
        msg: function(data) {
            if(data.length > 5) {
                //if(data[0] != "CHATMESG") console.log(data);
                if(data[0] == "CHATMESG") {
                    var chatGrade = "";
                    var chatGender = "m";
                    var chatAgent = "pc";
                    var chatSup = "";
                    var chatQuick = "";
                    var chatFollow = "";
                    
                    if(data[6] != undefined && data[6] !== "") {
                        chatGrade = data[6];
                    }
                    else {
                        if(compareFlag(data[5], USERLEVEL.BJ)) chatGrade = "bj";
                        else if(compareFlag(data[5], USERLEVEL.MANAGER)) chatGrade = "mng";
                        else if(compareFlag(data[5], USERLEVEL.TOPFAN)) chatGrade = "top";
                        else if(compareFlag(data[5], USERLEVEL.FANCLUB)) chatGrade = "fan";
                        else chatGrade = "non";
                    }
                    
                    if(compareFlag(data[5], USERLEVEL.SPTR_STICKER)) chatSup = "sup";
                    if(compareFlag(data[5], USERLEVEL.QUICKVIEW)) chatQuick = "quick";
                    if(compareFlag(data[5], USERLEVEL.FEMALE)) chatGender = "w";
                    if(compareFlag(data[5], USERLEVEL.MOBILE)) chatAgent = "m";
                    if(compareFlag(data[5], USERLEVEL.FOLLOWER)) chatFollow = "follow";
                    
                    sub.chat.add({
                        type:"chat",
                        grade:chatGrade,
                        gender:chatGender,
                        agent:chatAgent,
                        support:chatSup,
                        quick:chatQuick,
                        follow:chatFollow,
                        uid:data[2].replace(/\(\d\)/g, ""),
                        uname:data[4],
                        msg:data[1]
                    });
                }
            }
        },
        msgtsort: function(a,b) {
            // if (a[0] < b[0]) return -1;
            // if (a[0] > b[0]) return 1;
            // return 0;
            return a[0] - b[0];
        },
        msgt: function(data) {
            //console.log(data);
            var getMsg = data.msg;
            
            if(data.info.emotes != null) {
                var emoteObject = [];
                for(var key in data.info.emotes) {
                    for(var keys in data.info.emotes[key]) {
                        var subEmoteArray = data.info.emotes[key][keys].split("-");
                        emoteObject.push([parseInt(subEmoteArray[0], 10), parseInt(subEmoteArray[1], 10), key]);
                    }
                }
                
                //아이콘 정렬
                emoteObject = emoteObject.sort(sub.chat.msgtsort);
                
                //아이콘 변환
                var charArray = [];
                var chatStart = 0;
                var chatLength = emoteObject.length - 1;
                for(var key in emoteObject) {
                    var getStart = parseInt(emoteObject[key][0], 10);
                    var getEnd = parseInt(emoteObject[key][1], 10);
                    charArray.push(data.msg.substring(chatStart, getStart).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />"));
                    //charArray.push(data.msg.substring(chatStart, getStart));
                    charArray.push("<img src='http://static-cdn.jtvnw.net/emoticons/v1/" + emoteObject[key][2] + "/1.0' alt='" + data.msg.substring(getStart, getEnd + 1) + "' class='icon'>");
                    if(key == chatLength) charArray.push(data.msg.substring(getEnd + 1).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />"));
                    //if(key == chatLength) charArray.push(data.msg.substring(getEnd + 1));
                    chatStart = getEnd + 1;
                }
                
                getMsg = charArray.join("");
            }
            else {
                getMsg = getMsg.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
            }
            
            var getTwitchBadge = {};
            if(data.info.badges != null) {
                getTwitchBadge = data.info.badges;
            }
            sub.chat.add({
                type:"chat",
                broadtype:"twitch",
                grade:getTwitchBadge,
                gender:"none",
                agent:"none",
                support:"none",
                quick:"none",
                uid:data.info.username,
                uname:data.info["display-name"] || data.info.username,
                color:data.info["color"] != undefined && data.info["color"] != null && data.info["color"] != "" ? data.info["color"] : "",
                msg:getMsg
            });
        },
        msgtc: function(data) {
            if(data && data.user && data.msg) {
                var getMsg = data.msg;
                getMsg = getMsg.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
                var getCheerData = player.twitch.cheerdata(parseInt(data.user.bits, 10), getMsg);
                sub.chat.add({
                    type:"star",
                    broadtype:"twitch",
                    grade:"gift",
                    gifttype:"bits",
                    gender:"none",
                    agent:"none",
                    support:"none",
                    quick:"none",
                    uid:data.user.username,
                    uname:data.user["display-name"] || data.user.username,
                    msg:getCheerData[2],
                    color:getCheerData[1],
                    img:getCheerData[0],
                    value:data.user.bits,
                    join:0
                });
            }
        },
        msgyprev: [],
        msgy: function(data) {
            if(sub.debug) console.log("youtube chat", data);
            var startDate = null;
            
            $.each(data, function(key, value) {
                if(value.snippet != undefined && (value.snippet.textMessageDetails != undefined || value.snippet.superChatDetails != undefined)) {
                    var getChatDate = new Date(value.snippet.publishedAt).getTime();
                    
                    var getChatMsg = "";
                    if(value.snippet.textMessageDetails != undefined) {
                        getChatMsg = value.snippet.displayMessage;
                    }
                    else if(value.snippet.superChatDetails != undefined) {
                        getChatMsg = value.snippet.superChatDetails.userComment && value.snippet.superChatDetails.userComment != "" ? value.snippet.superChatDetails.userComment : "";
                    }
                    if(sub.chat.msgyprev[0] > getChatDate || (sub.chat.msgyprev[0] == getChatDate && sub.chat.msgyprev[1] == getChatMsg)) {
                        return true;
                    }
                    
                    sub.chat.msgyprev = [getChatDate, getChatMsg];
                    
                    var getDelayTime = 0;
                    if(startDate == null) {
                        startDate = getChatDate;
                    }
                    else {
                        getDelayTime = getChatDate - startDate;
                        if(getDelayTime < 1 || isNaN(getDelayTime)) getDelayTime = 0;
                    }
                    
                    setTimeout(function() {
                        sub.chat.msgyrun(value, { startDate:startDate, chatTime:getChatDate, delayTime:getDelayTime });
                    }, getDelayTime);
                }
            });
        },
        msgyrun: function(data, time) {
            if(sub.debug) console.log("youtube chat", data, time);
            var getGrade = "";
            if(data.authorDetails.isChatModerator == true) getGrade = "moderator";
            else if(data.authorDetails.isChatOwner == true) getGrade = "owner";
            else if(data.authorDetails.isChatSponsor == true) getGrade = "sponsor";
            
            if(data.snippet.textMessageDetails != undefined)  {
                var getMsg = data.snippet.displayMessage.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
                sub.chat.add({
                    type:"chat",
                    broadtype:"youtube",
                    grade:getGrade,
                    gender:"none",
                    agent:"none",
                    support:"none",
                    quick:"none",
                    profile:data.authorDetails.profileImageUrl || "",
                    uid:data.authorDetails.channelId,
                    uname:data.authorDetails.displayName,
                    msg:getMsg
                });
            }
            else if(data.snippet.superChatDetails != undefined)  {
                var getMsg = data.snippet.superChatDetails.userComment && data.snippet.superChatDetails.userComment != "" ? data.snippet.superChatDetails.userComment.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />") : "";
                sub.chat.add({
                    type:"star",
                    broadtype:"youtube",
                    grade:"gift",
                    gender:"none",
                    agent:"none",
                    support:"none",
                    quick:"none",
                    profile:data.authorDetails.profileImageUrl || "",
                    uid:data.authorDetails.channelId,
                    uname:data.authorDetails.displayName,
                    msg:getMsg,
                    value:data.snippet.superChatDetails.amountDisplayString,
                    unit:data.snippet.superChatDetails.currency,
                    join:0
                });
            }
        },
        msgylivechat: function(data) {
            if(sub.debug) console.log("youtube chat", data);
            var startDate = null;
            
            $.each(data, function(key, value) {
                var getChatDate = value.time;
                var getDelayTime = 0;
                if(startDate == null) {
                    startDate = getChatDate;
                }
                else {
                    getDelayTime = (getChatDate - startDate) / 1000;
                    if(getDelayTime < 1 || isNaN(getDelayTime)) getDelayTime = 0;
                }
                
                //console.log("youtube delay", value.time, getChatDate, getDelayTime);
                setTimeout(function() {
                    sub.chat.add(value);
                }, getDelayTime);
            });
        },
        msgy_new: function(data) {
            sub.chat.msgyrun(data);
        },
        msgyrun_news: function(data) {
            var startDate = null;
            if(sub.debug) console.log("youtube chat msgyrun", data);
            
            $.each(data, function(key, value) {
                //console.log("youtube type", value, value.type);
                if(value.type) {
                    if(value.type != "delete") {
                        var getGrade = "";
                        if(value.grade == "MODERATOR") getGrade = "moderator";
                        else if(value.grade == "OWNER") getGrade = "owner";
                        // else if(data.authorDetails.isChatSponsor == true) getGrade = "sponsor";
                        //"VERIFIED" 인증 체크 + 매니저 +
                        
                        var getChatDate = parseInt(value.time / 1000, 10);
                        var getDelayTime = 0;
                        if(startDate == null) {
                            startDate = getChatDate;
                        }
                        else {
                            getDelayTime = getChatDate - startDate;
                            if(getDelayTime < 1 || isNaN(getDelayTime)) getDelayTime = 0;
                        }
                        //console.log("youtube delay", value.name, value.vip, value.grade, value.text, getDelayTime);
                        
                        setTimeout(function() {
                            if(value.type == "chat")  {
                                //var getMsg = data.text.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
                                var getMsg = value.text.replace(/\r\n/gi,"<br />");
                                sub.chat.add({
                                    type:"chat",
                                    broadtype:"youtube",
                                    grade:getGrade,
                                    gender:"none",
                                    agent:"none",
                                    support:"none",
                                    quick:"none",
                                    profile:value.photo,
                                    vip:value.vip,
                                    uid:value.id,
                                    uname:value.name,
                                    msg:getMsg,
                                    chatid:value.chatid
                                });
                            }
                            else if(value.type == "superchat")  {
                                var getMsg = value.text.replace(/\r\n/gi,"<br />");
                                sub.chat.add({
                                    type:"star",
                                    broadtype:"youtube",
                                    grade:"gift",
                                    gender:"none",
                                    agent:"none",
                                    support:"none",
                                    quick:"none",
                                    profile:value.photo,
                                    vip:value.vip,
                                    uid:value.id,
                                    uname:value.name,
                                    msg:getMsg,
                                    chatid:value.chatid,
                                    value:value.value,
                                    display:value.display,
                                    unit:value.unit,
                                    join:0
                                });
                            }
                        }, getDelayTime);
                    }
                    else {
                        sub.chat.cancelchat(value.uname);
                    }
                }
            });
        },
        msgk: function(data,type,emoticonchk) {
            $.each(data, function(key, value) {
                try{
                    if(value && value.type) {
                        if(value.msg && value.msg != "") {
                            if(type == "socket") {
                                value.msg = value.msg.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"");
                            }
                            else {
                                value.msg = decodeURIComponent(value.msg).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"");
                            }
                        }
                        else{
                            value.msg = "";
                        }
                        
                        if(value.emoticon && value.emoticon != "" && (emoticonchk == undefined || emoticonchk == true)) {
                            var emoticonArray = value.emoticon.split("/");
                            var emoticonIdx = parseInt(emoticonArray[1].replace(/[^0-9]/g,""), 10) - 1;
                            //console.log("kakaotv", emoticonArray[0], emoticonIdx, kakaotvEmoticonList[emoticonArray[0]]);
                            
                            if(kakaotvEmoticonList[emoticonArray[0]] == undefined || kakaotvEmoticonList[emoticonArray[0]][emoticonIdx] == undefined) {
                                if(!isNaN(emoticonIdx)) {
                                    $.ajax({
                                        url:"lib/kakaotv.php",
                                        dataType:"json",
                                        data:{
                                            type:"emoticon",
                                            id:emoticonArray[0]
                                        },
                                        success: function(data) {
                                            //console.log("kakaotv",data);
                                            if(data && data.body) {
                                                kakaotvEmoticonList[emoticonArray[0]] = data.body;
                                                
                                                if(kakaotvEmoticonList[emoticonArray[0]][emoticonIdx] != undefined) {
                                                    sub.chat.msgk([value], type, true);
                                                }
                                                else {
                                                    sub.chat.msgk([value], type, false);
                                                }
                                            }
                                        },
                                        error: function() {
                                            sub.chat.msgk([value], type, false);
                                        }
                                    });          
                                    return true;
                                }
                            }
                            
                            if(kakaotvEmoticonList[emoticonArray[0]] != undefined && kakaotvEmoticonList[emoticonArray[0]][emoticonIdx] != undefined) {
                                //value.msg = '<img src="' + kakaotvEmoticonList[emoticonArray[0]][emoticonIdx] + '" alt="" class="kakaotv_emoticon">' + value.msg;
                                value.msg = '<img src="lib/kakaotv.php?type=emoticonsrc&id=' + kakaotvEmoticonList[emoticonArray[0]][emoticonIdx] + '" alt="" class="kakaotv_emoticon">' + value.msg;
                            }
                            // if(emoticonArray.length > 1 && kakaotvEmoticon[emoticonArray[0]] != undefined) {
                                // value.msg = '<img src="' + resourceLink + "emoticon/" + value.emoticon + '" alt="" class="kakaotv_emoticon">' + value.msg;
                            // }
                        }
                            
                        if(value.type == "chat") {
                            if($.trim(value.msg) != "") {
                                if(type == "socket") {
                                    var getChatName = value.uname.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/(?:\r\n|\r|\n)/ig, "");
                                }
                                else {
                                    var getChatName = decodeURIComponent(value.uname).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/(?:\r\n|\r|\n)/ig, "");
                                }
                                sub.chat.add({
                                    type:"chat",
                                    broadtype:"kakaotv",
                                    grade:value.grade,
                                    gender:"none",
                                    agent:"none",
                                    support:"none",
                                    quick:"none",
                                    uid:getChatName,
                                    uname:getChatName,
                                    msg:value.msg
                                });
                            }
                        }
                        else if(value.type == "star"){
                            //console.log(value);
                            if(type == "socket") {
                                var getChatName = value.uname.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/(?:\r\n|\r|\n)/ig, "");
                                var getChatText = value.msg.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"");
                            }
                            else {
                                var getChatName = decodeURIComponent(value.uname).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/(?:\r\n|\r|\n)/ig, "");
                                var getChatText = decodeURIComponent(value.text).replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"");
                            }
                            sub.chat.add({
                                type:"star",
                                broadtype:"kakaotv",
                                grade:"gift",
                                gender:"none",
                                agent:"none",
                                support:"none",
                                quick:"none",
                                uid:getChatName,
                                uname:getChatName,
                                msg:value.msg,
                                text:getChatText,
                                value:value.value,
                                cls:value.cls
                            });
                        }
                    }
                }
                catch(error) {
                    
                }
            });
        },
        msgn: function(data) {
            var startDate = null;

            $.each(data.reverse(), function(key, value) {
                if(value.time != "") {
                    player.navertv.datainfo.time = value.time;
                }
                var getChatDate = new Date(value.time).getTime();
                
                var getDelayTime = 0;
                if(startDate == null) {
                    startDate = getChatDate;
                }
                else {
                    getDelayTime = getChatDate - startDate;
                    if(getDelayTime < 1 || isNaN(getDelayTime)) getDelayTime = 0;
                }
                
                setTimeout(function() {
                    sub.chat.msgnrun(value);
                }, getDelayTime);
            });
        },
        msgnrun: function(data) {
            var getMsg = data.contents.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
            sub.chat.add({
                type:"chat",
                broadtype:"navertv",
                grade:"",
                gender:"none",
                agent:"none",
                support:"none",
                quick:"none",
                profile:data.profile || "",
                uid:data.id,
                uname:data.name,
                msg:getMsg
            });
        },
        msgf: function(data) {
            if(sub.debug) console.log("facebook msgf", data);
            var startDate = null;
            
            $.each(data, function(key, value) {
                var getChatDate = new Date(value.time).getTime();
                
                var getChatMsg = value.message;
                if(sub.chat.msgyprev[0] > getChatDate || (sub.chat.msgyprev[0] == getChatDate && sub.chat.msgyprev[1] == getChatMsg)) {
                    return true;
                }
                
                sub.chat.msgyprev = [getChatDate, getChatMsg];
                
                var getDelayTime = 0;
                if(startDate == null) {
                    startDate = getChatDate;
                }
                else {
                    getDelayTime = getChatDate - startDate;
                    if(getDelayTime < 1 || isNaN(getDelayTime)) getDelayTime = 0;
                }
                
                setTimeout(function() {
                    sub.chat.msgfrun(value);
                }, getDelayTime);
            });
        },
        msgfrun: function(data) {
            var getMsg = data.message.replace(/(<([^>]+)>)|(&lt;([^>]+)&gt;)|(src\=|style\=|src&#61;|style&#61;)/ig,"").replace(/\r\n/gi,"<br />");
            sub.chat.add({
                type:"chat",
                broadtype:"facebook",
                grade:"",
                gender:"none",
                agent:"none",
                support:"none",
                quick:"none",
                profile:data.profile || "",
                uid:data.id,
                uname:data.name,
                msg:getMsg
            });
        },
        add: function(data) {
            //if(data.grade == "notice" || data.grade == "admin" || data.grade == "gift") console.log(data);
            var chatOpt = sub.chat.opt;
            var getVoiceCheck = true;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
                getVoiceCheck = false;
            }
            else {
            	if(sub.debug) console.log("chat add",data);
                var loadData = sub.chat.data;
            }
            var chatData = data;
            var addCheck = true;
            
            var getVoiceName = "";
            var getVoiceMsg = "";
            var getChatName = "";
            var getAddClass = "";
            
            var getColorId = chatData.uid != "" ? chatData.uid : chatData.uname;
            
            if(loadData.filterid == true && chatOpt.filteridlist.length > 0) {
                if((chatData.uid != "" && chatOpt.filteridlist.indexOf($.trim(chatData.uid).toLowerCase()) > -1) || (chatData.uname != "" && chatOpt.filteridlist.indexOf($.trim(chatData.uname).toLowerCase()) > -1)) {
                    if(sub.debug) console.log("filteridlist 채팅 제외", chatData.uid, chatData.uname, chatOpt.filteridlist);
                    return;
                }
            }
            
            //필터링 단어
            // if(loadData.filter && loadData.filterword != "") {
                // //TODO 정규식 사용시 체크
                // //addCheck = !chatOpt.filterword.test(chatData.uid + " " + chatData.uname + " " + chatData.msg);
                // var getFilterText = chatData.uid + " " + chatData.uname + " " + chatData.msg;
                // addCheck = !getFilterText.match(chatOpt.filterword);
            // }
            
            //채팅 표시 등급
            if(chatData.broadtype == undefined) chatData.broadtype = "afreecatv";
            
            if(chatData.broadtype == "afreecatv" && loadData.ice != "all" && (chatData.grade == "top" || chatData.grade == "fan" || chatData.support == "sup" || chatData.grade == "non")) {
                switch(loadData.ice) {
                    case "fan" :
                        addCheck = false;
                        if(chatData.grade == "fan" || chatData.follow == "follow") addCheck = true;
                        break;
                    case "sup" :
                        addCheck = false;
                        if(chatData.support == "sup") addCheck = true;
                        break;
                    case "fansup" :
                        if(chatData.grade == "non" && chatData.support != "sup") addCheck = false;
                        break;
                    case "top" :
                        addCheck = false;
                        if(chatData.grade == "bj" || chatData.grade == "mng" || chatData.grade == "top") addCheck = true;
                        break;
                    case "non" :
                        if(chatData.grade != "non") addCheck = false;
                        break;
                    case "bj" :
                        if(chatData.grade != "bj") addCheck = false;
                        break;
                    case "mng" :
                        addCheck = false;
                        if(chatData.grade == "bj" || chatData.grade == "mng") addCheck = true;
                        break;
                    case "follow" :
                        addCheck = false;
                        if(chatData.follow == "follow") addCheck = true;
                        break;
                }
            }
            
            if(addCheck) {
                if(loadData.id && chatData.broadtype != "youtube" && chatData.broadtype != "kakaotv" && chatData.uname != chatData.uid) var getNick = chatData.uname+"("+chatData.uid+")";
                else var getNick = chatData.uname;
                var getCheckNick = loadData.type == "normal" || ((loadData.type == "bullet" || loadData.type == "cloud") && loadData.nick) ? true : false;
                if(chatData.type == "join") getCheckNick = false;
                
                getVoiceName = chatData.uname;
                getChatName = chatData.uid != "" && chatData.uname != chatData.uid ? (chatData.uname+"("+chatData.uid+")") : chatData.uname; 
                
                //대체어
                if(loadData.replace && loadData.replaceword && loadData.replaceword.length > 0) {
                    try {
                        if(getCheckNick) {
                            $.each(loadData.replaceword, function(key, value) {
                                var regex = new RegExp(value[0],"gi");
                                getNick = getNick.replace(regex, value[1]);
                                chatData.msg = chatData.msg.replace(regex, value[1]);
                            });
                        }
                        else {
                            $.each(loadData.replaceword, function(key, value) {
                                var regex = new RegExp(value[0],"gi");
                                chatData.msg = chatData.msg.replace(regex, value[1]);
                            });
                        }
                    }
                    catch(error) {
                    }
                }
                
                //필터링 단어
                if(loadData.filter == true && chatOpt.filterword != "") {
                    if(getNick != undefined && getNick !== "") getNick = getNick.replace(chatOpt.filterword, "♡");
                    if(chatData.msg != undefined && chatData.msg !== "") chatData.msg = chatData.msg.replace(chatOpt.filterword, "♡");
                }
                getVoiceMsg = chatData.msg;
                
                //이모티콘
                try {
                    if(chatData.broadtype == "afreecatv") {
                        var getEmoticon = chatData.msg.match(emoticonRegex);
                        $.each(getEmoticon, function(key, value) {
                            if(emoticonList[value] != undefined) {
                                var getImg = emoticonList[value];
                                chatData.msg = chatData.msg.replace(new RegExp(value,"g"), "<img src='" + getImg + "' alt='' class='icon'>");
                            }
                        });
                        
                    }
                    else if(chatData.broadtype == "goldlive") {
                    }
                }
                catch(error) {
                
                }
                
                //모바일 이모티콘 변환
                chatData.msg = twemoji.parse(chatData.msg);
                
                if(getCheckNick) {
                    if(chatData.broadtype == "afreecatv") {
                        var afreecaSponCheck = false;
                        if(chatData.grade == "bj" || chatData.grade == "mng") {
                            if((loadData.afreecabj == true && chatData.grade == "bj") || (loadData.afreecamanager == true && chatData.grade == "mng")) {
                                getNick = iconUserList[chatData.grade] + getNick;
                            }
                        }
                        else {
                            if(loadData.afreecaquick == true && chatData.quick == "quick") {
                                getNick = iconUserList[chatData.quick] + getNick;
                            }
                            if(loadData.afreecasup == true && chatData.support == "sup") {
                                getNick = iconUserList[chatData.support] + getNick;
                            }
                            if((loadData.afreecatop == true && chatData.grade == "top") || (loadData.afreecafan == true && chatData.grade == "fan")) {
                                getNick = iconUserList[chatData.grade] + getNick;
                            }
                            if(loadData.afreecafollow == true && chatData.follow == "follow") {
                                afreecaSponCheck = true;
                                getNick = iconUserList[chatData.follow] + getNick;
                            }
                        }
                        
                        if(loadData.afreecaagent == true && chatData.agent) {
                            if(iconUserList[chatData.agent] != undefined) {
                                getNick = iconUserList[chatData.agent] + getNick;
                            }
                        }
                        
                        var afreecaSponIcon = false;
                        if(afreecaSponCheck == true && player.afreecatv.datainfo.spcon != "") {
                            afreecaSponIcon = true;
                            getNick = player.afreecatv.datainfo.spcon + getNick;
                        }
                        
                        if(afreecaSponIcon != true && loadData.afreecagender == true && chatData.gender && chatData.gender != "") {
                            var getIconChat = iconChatList.non.m;
                            if(chatData.grade != undefined && iconChatList[chatData.grade] != undefined && iconChatList[chatData.grade][chatData.gender] != undefined) {
                                if(chatData.follow == "follow" && chatData.grade == "fan" && iconChatList.follow[chatData.gender] != undefined) {
                                    getIconChat = iconChatList.follow[chatData.gender];
                                }
                                else {
                                    getIconChat = iconChatList[chatData.grade][chatData.gender];
                                }
                            }
                            else if(iconChatList.non[chatData.gender] != undefined) {
                                getIconChat = iconChatList.non[chatData.gender];
                            }
                            
                            getNick = "<img src='" + getIconChat + "' alt='' class='ig'></span>" + getNick;
                        }
                    }
                    else if(chatData.broadtype == "twitch") {
                        var getGradeIcon = "";
                        //TODO 벳지 아이콘 설정 하나로 통합하기
                        try{
                            for(var key in chatData.grade) {
                                if(loadData.twitchadmin == true && (key == "staff" || key == "admin" || key == "global_mod")) {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if((loadData.twitchbroadcaster == true && key == "broadcaster") || (loadData.twitchmoderator == true && key == "moderator")) {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitchturbo == true && key == "turbo") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitchpremium == true && key == "premium") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitcbadgeetc == true && key == "vip") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitcbadgeetc == true && key == "partner") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitcbadgeetc == true &&key == "clip-champ") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitcbadgeetc == true &&key == "sub-gifter") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                                if(loadData.twitchsubscriber == true && key == "subscriber") {
                                    if(chatTwitchData.badge[chatData.grade[key]]) {
                                        getGradeIcon +=  "<img src='" + chatTwitchData.badge[chatData.grade[key]]["image_url_1x"] + "' alt='' class='icon_twitchgrade'>";
                                    }
                                    else {
                                        getGradeIcon +=  "<img src='" + chatTwitchData.grade.subscriber + "' alt='' class='icon_twitchgrade'>";
                                    }
                                }
                                if(loadData.twitchbits == true && key == "bits") {
                                    if(chatTwitchData.bits[chatData.grade[key]] && chatTwitchData.bits[chatData.grade[key]]["image_url_1x"]) {
                                        getGradeIcon += "<img src='" + chatTwitchData.bits[chatData.grade[key]]["image_url_1x"] + "' alt='' class='icon_twitchgrade'>";
                                    }
                                    else {
                                        getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                    }
                                }
                                if(loadData.twitchbits == true && key == "bits-leader") {
                                    if(chatTwitchData["bits-leader"][chatData.grade[key]] != undefined && chatTwitchData["bits-leader"][chatData.grade[key]]["image_url_1x"] != undefined) {
                                        getGradeIcon += "<img src='" + chatTwitchData["bits-leader"][chatData.grade[key]]["image_url_1x"] + "' alt='' class='icon_twitchgrade'>";
                                    }
                                }
                                if(loadData.twitchbits == true && key == "bits-charity") {
                                    getGradeIcon += "<img src='" + chatTwitchData.grade[key] + "' alt='' class='icon_twitchgrade'>";
                                }
                            }
                        }
                        catch(error) {
                            
                        }
                        
                        getNick = getGradeIcon + getNick;
                    }
                    else if(chatData.broadtype == "youtube") {
                        if(loadData.youtubesponsor == true && chatData.vip && chatData.vip != "") {
                            getNick = "<img src='" + chatData.vip + "' alt='' class='icon_youtube_vip'>" + getNick;
                        }
                        
                        if(loadData.youtubesponsor == true && chatData.grade == "sponsor") {
                            getNick = "<span class='youtube_" + chatData.grade + "'></span>" + getNick;
                        }
                        
                        if((loadData.youtubeowner == true && chatData.grade == "owner") || (loadData.youtubemoderator == true && chatData.grade == "moderator")) {
                            getNick = "<span class='youtube_" + chatData.grade + "'></span>" + getNick;
                        }
                        
                        //유튜브 프로필 이미지
                        if(loadData.youtubeprofile != undefined && loadData.youtubeprofile == true && chatData.profile != undefined && chatData.profile != "") {
                            getNick = "<img src='" + chatData.profile + "' alt='' class='youtube_profile'>" + getNick;
                        }
                    }
                    else if(chatData.broadtype == "kakaotv") {
                        if((loadData.kakaotvpd == true && chatData.grade == "pd") || (loadData.kakaotvad == true && chatData.grade == "ad")) {
                            getNick = "<span class='kakaotv_" + chatData.grade + "'></span>" + getNick;
                        }
                    }
                    else if(chatData.broadtype == "navertv") {
                        //네이버tv 프로필 이미지
                        // if(loadData.navertvprofile != undefined && loadData.navertvprofile == true && chatData.profile != "") {
                            // getNick = "<img src='" + chatData.profile + "' alt='' class='navertv_profile'>" + getNick;
                        // }
                    }
                    else if(chatData.broadtype == "facebook") {
                        //페이스북 프로필 이미지
                        if(loadData.facebookprofile != undefined && loadData.facebookprofile == true && chatData.profile != "") {
                            getNick = "<img src='" + chatData.profile + "' alt='' class='facebook_profile'>" + getNick;
                        }
                    }
                    else if(chatData.broadtype == "goldlive") {
                        if(chatData.plvmng == 90){    // 매니저
                            if(loadData.goldlivemng == true) getNick = "<img src=\"" + goldLiveData.url + "/asset/www/images/chat/icon_manager_new.png\" class='ic'><img src='" + goldLiveData.url + "/asset/www/images/chat/class_fan_s0" + chatData.plv + "_new.png' class='ulevel ic'>" + getNick;
                        }
                        else if(chatData.plvmng == 99){  // 비제이
                            //if(loadData.goldlivebj == true) getNick = '<img src="' + goldLiveData.url + '/asset/www/images/chat/icon_master_new.png" alt="BJ" class="ic"><img src="img/gd_blankr.png" class="ulevel ic blank">' + getNick;
                            if(loadData.goldlivebj == true) getNick = '<img src="' + goldLiveData.url + '/asset/www/images/chat/icon_master_new.png" alt="BJ" class="ic">' + getNick;
                        }
                        // else if(chatData.plvmng == 0){   // 민간인
                            // if(loadData.goldlivefan == true) getNick = '<img src="img/gd_blankl.png" class="ic blank"><img src="img/gd_blankr.png" class="ulevel ic blank">' + getNick;
                        // }
                        else if(chatData.plvmng > 0){    // 등급이 있는 유저.
                            if(loadData.goldlivefan == true) getNick = "<img src=\"" + goldLiveData.url + "/asset/www/images/class/class_all0"+chatData.level+"_new.png\" class='ic'><img src='" + goldLiveData.url + "/asset/www/images/chat/class_fan_s0" + chatData.plv + "_new.png' class='ulevel ic'>" + getNick;
                        }
                    }
                    
                    getNick = "<span class='broadcast_" + chatData.broadtype + "'></span>" + getNick;
                }
                
                //선물 이미지 사용
                var giftShowCheck = false;
                var giftShowValue = 0;
                var getTextMsgCheck = false;
                
                if(chatData.broadtype == "afreecatv" && chatData.grade == "gift") {
                    if(loadData.gifton == undefined || loadData.gifton == true) {
                        if(loadData.giftshow != undefined && loadData.giftshow == true) {
                            giftShowCheck = true;
                            giftShowValue = parseInt(chatData.value, 10);
                            
                            //별풍선
                            if(chatData.type == "star") {
                                if(chatData.startype != undefined && chatData.startype == "VODBALLOON") {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg"><span class="vod">동영상</span> 별풍선' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                else if(chatData.startype != undefined && chatData.startype == "afsubscription") {
                                    if(chatData.subtype != undefined && chatData.subtype.length > 0) {
                                        var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">' + chatData.subtype[0]  + '구독 하였습니다</p></div></div>');
                                    }
                                    else {
                                        var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">' + chatData.value  + '개월 ' + (Number(chatData.value) > 1 ? '연속 ' : '') + '구독 중입니다!</p></div></div>');
                                    }
                                }
                                else if(chatData.startype != undefined && chatData.startype == "ADBALLOON") {
                                    var getGift = $('<div class="item_gift adballoon"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '<span style="color:#333;font-weight:normal">님이</span></p><p class="gift_msg">' + chatData.title  + ' 애드벌룬 ' + chatData.value + '개 선물!</p></div></div>');
                                }
                                else if(chatData.startype != undefined && chatData.startype == "VIDEOBALLOON") {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">영상 풍선' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                else {
                                    if(chatData.relay != undefined && chatData.relay == "sub") {
                                        var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg"><span class="gift_relay">중계방</span>별풍선' + chatData.value  + '개 선물!</p></div></div>');
                                    }
                                    else {
                                        var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">별풍선' + chatData.value  + '개 선물!</p></div></div>');
                                    }
                                }
                                sub.chat.bgimgstar(chatData, getGift);
                                var getChat = $('<li data-id="' + chatData.uid + '" class="gift_box ' + chatData.type + ' ' + chatData.broadtype + ' ' + chatData.support + ' ' + chatData.gender + ' ' + getAddClass + '"></li>');
                                getChat.append(getGift);
                                if(chatData.join != undefined && chatData.join > 0) {
                                    getChat.append("<p class='gift_join'>" + chatData.join + "번째로 팬클럽이 되셨습니다.</p>");
                                }
                            }
                            else if(chatData.type == "sticker") {
                                if(chatData.relay != undefined && chatData.relay == "sub") {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg"><span class="gift_relay">중계방</span>스티커' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                else {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">스티커' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                sub.chat.bgimgstar(chatData, getGift);
                                var getChat = $('<li data-id="' + chatData.uid + '" class="gift_box ' + chatData.type + ' ' + chatData.broadtype + ' ' + chatData.support + ' ' + chatData.gender + '"></li>');
                                getChat.append(getGift);
                                if(chatData.join != undefined && chatData.join > 0) {
                                    getChat.append("<p class='gift_join'>" + chatData.join + "번째로 서포터가 되셨습니다.</p>");
                                }
                            }
                            else if(chatData.type == "choco") {
                                if(chatData.relay != undefined && chatData.relay == "sub") {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg"><span class="gift_relay">중계방</span>초콜릿' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                else {
                                    var getGift = $('<div class="item_gift"><div class="gift_img"></div><div class="gift_text"><p class="gift_nick">' + getNick + '</p><p class="gift_msg">초콜릿' + chatData.value  + '개 선물!</p></div></div>');
                                }
                                sub.chat.bgimgstar(chatData, getGift);
                                var getChat = $('<li data-id="' + chatData.uid + '" class="gift_box ' + chatData.type + ' ' + chatData.broadtype + ' ' + chatData.support + ' ' + chatData.gender + '"></li>');
                                getChat.append(getGift);
                            }
                        }
                        else {
                            var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text"><span class="icon_afreecatv"></span>' + chatData.msg + '</p></li>');
                        }
                    }
                    else return;
                }
                else if(chatData.broadtype == "youtube" && chatData.grade == "gift") {
                    if(sub.debug) console.log("youtube gift", chatData);
                    
                    var getUnit = comm.currency.convert(chatData.value);
                    var getExchangeMoney = replace.money.convert(getUnit[1], getUnit[0]);
                    if(getUnit.length > 0 && getUnit[0] !== "" && getUnit[0] !== "KRW") {
                        var getMoney =  getExchangeMoney[2] + '원<span class="org">(' + chatData.display + ')</span>';
                    }
                    else {
                        var getMoney =  getUnit[1] + "원";
                    }
                    
                    if(loadData.gifton == undefined || loadData.gifton == true) {
                        if(loadData.giftshow != undefined && loadData.giftshow == true) {
                            var getYtbot = "";
                            if(chatData.msg != "") getYtbot = '<div class="yt_bot"><p class="yt_text">' + chatData.msg + '</p></div>';
                            var getGift = '<div class="youtube_box ' + getExchangeMoney[1] + '"><div class="yt_top"><img src="' + chatData.profile + '" alt="" class="yt_profile"><p class="yt_name"><span class="icon_youtube"></span>' + chatData.uname + '</p><p class="yt_value">' + getMoney + '</p></div>' + getYtbot + '</div>';
                            var getChat = $('<li data-id="' + chatData.uid + '" class="youtube_gift ' + chatData.type + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '">' + getGift + '</li>');
                            
                            giftShowCheck = true;
                            giftShowValue = parseInt(getExchangeMoney[2], 10);
                        }
                        else {
                            var getGiftText = '<span class="icon_youtube"></span>' + chatData.uname + "님이 " + getMoney +"을 후원했습니다.";
                            if(chatData.msg != "") {
                                getGiftText += "<br><i class='fa fa-commenting icon_comment' aria-hidden='true'></i> " + chatData.msg;
                            }
                            var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getGiftText + '</p></li>');
                        }
                    }
                    else return;
                }
                else if(chatData.broadtype == "kakaotv" && chatData.grade == "gift") {
                    var getGiftText = '<span class="icon_kakaotv"></span>' + chatData.uname + " 님이 쿠키" + chatData.value +"개를 보냈습니다.";
                    if(loadData.gifton == undefined || loadData.gifton == true) {
                        if(loadData.giftshow != undefined && loadData.giftshow == true) {
                            var getMsgText = "";
                            if(chatData.msg != "") getMsgText = '<div class="ka_msg"><p class="ka_text">' + chatData.msg + '</p></div>';
                            var getGift = '<div class="kakaotv_box ' + chatData.cls + '"><div class="ka_img"><img src="img/kakaotv_blank.png" alt="" class="img"><p class="ka_value">' + chatData.value + '</p></div>' + getMsgText + '<div class="ka_support"><p class="ka_text">' + getGiftText + '</p></div></div>';
                            var getChat = $('<li data-id="' + chatData.uid + '" class="kakaotv_gift ' + chatData.type + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '">' + getGift + '</li>');
                            
                            giftShowCheck = true;
                            giftShowValue = parseInt(chatData.value, 10);
                        }
                        else {
                            if(chatData.msg != "") {
                                getGiftText += "<br><i class='fa fa-commenting icon_comment' aria-hidden='true'></i> " + chatData.msg;
                            }
                            var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getGiftText + '</p></li>');
                        }
                    }
                    else return;
                }
                else if(chatData.broadtype == "twitch" && chatData.grade == "gift") {
                    if(chatData.gifttype == "bits") {
                        var getBitsIcon = '<img src="' + chatData.img + '" alt="" class="icon">';
                        if(loadData.gifton == undefined || loadData.gifton == true) {
                            if(loadData.giftshow != undefined && loadData.giftshow == true) {
                                var getGiftText = '<span class="icon_twitch"></span><i class="fa fa-trophy" aria-hidden="true"></i><b>' + chatData.uname + "</b> 님의 응원 : " + getBitsIcon + " <span style='color:" + chatData.color + "'>" + chatData.value + "</span>";
                                var getTwbot = "";
                                if(chatData.msg != "") getTwbot = '<div class="tw_bot"><p class="tw_text">' + chatData.msg + '</p></div>';
                                var getGift = '<div class="twitch_box ' + chatData.gifttype + '"><div class="tw_top"><p class="tw_name">' + getGiftText + '</p></div>' + getTwbot + '</div>';
                                var getChat = $('<li data-id="' + chatData.uid + '" class="twitch_gift ' + chatData.type + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '">' + getGift + '</li>');
                            
                                giftShowCheck = true;
                                giftShowValue = parseInt(chatData.value, 10);
                            }
                            else {
                                var getGiftText = '<span class="icon_twitch"></span><b>' + chatData.uname + "</b> 님의 응원 : " + getBitsIcon + " <span>" + chatData.value + "</span>";
                                if(chatData.msg != "") {
                                    getGiftText += "<br><i class='fa fa-commenting icon_comment' aria-hidden='true'></i> " + chatData.msg;
                                }
                                var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getGiftText + '</p></li>');
                            }
                        }
                        else return;
                    }
                    else return;
                }
                else if(chatData.broadtype == "goldlive" && chatData.grade == "gift") {
                    if(loadData.gifton == undefined || loadData.gifton == true) {
                        if(loadData.giftshow != undefined && loadData.giftshow == true) {
                            var getImg = '';
                            if(chatData.img != undefined && chatData.img !== "") {
                                getImg = '<img src="' + chatData.img + '" alt="" class="img">';
                            } 
                            if(chatData.css != undefined && chatData.css.indexOf("climb") > -1) {
                                var getGift = '<div class="goldlive_box"><div class="gd_img">' + getImg + '</div><p class="gd_nick">★ ' + chatData.uname + ' 님께서 ★</p><p class="gd_climb">' + chatData.desc + '</p></div>';
                            }
                            else if(chatData.css != undefined && chatData.css.indexOf("mission") > -1) {
                                var getGift = '<div class="goldlive_box"><p class="gd_nick"><span class="name">' + chatData.uname + '</span> 님께서</p><p class="gd_climb"><span class="mission">[' + numberWithCommas(chatData.value) + '] ' + chatData.desc + '</span>를 <br>선물하셨습니다.</p></div>';
                            }
                            else {
                                var getGift = '<div class="goldlive_box"><div class="gd_img">' + getImg + '</div><p class="gd_nick">★ ' + chatData.uname + ' 님께서 ★</p><p class="gd_value"><span>' + numberWithCommas(chatData.value) + ' 골드</span>를 선물하셨습니다!</p></div>';
                            }
                            var getChat = $('<li data-id="' + chatData.uid + '" class="goldlive_gift ' + chatData.type + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + ' ' + chatData.css + '">' + getGift + '</li>');
                            
                            giftShowCheck = true;
                            giftShowValue = parseInt(chatData.value, 10);
                        }
                        else {
                            if(chatData.css != undefined && chatData.css.indexOf("climb") > -1) {
                                var getGiftText = '<span class="icon_goldlive"></span>' + chatData.uname + "님께서 " + chatData.desc;
                            }
                            else if(chatData.css != undefined && chatData.css.indexOf("mission") > -1) {
                                var getGiftText = '<span class="icon_goldlive"></span><span class="name">' + chatData.uname + '</span> 님께서 <span class="val">[' + numberWithCommas(chatData.value) + '] ' + chatData.desc + '</span>를 선물하셨습니다';
                            }
                            else {
                                var getGiftText = '<span class="icon_goldlive"></span>' + chatData.uname + "님께서 " + chatData.value +"골드를 선물하셨습니다!";
                            }
                            var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getGiftText + '</p></li>');
                        }
                    }
                    else return;
                }
                else {
                    getTextMsgCheck = true;
                    
                    if(chatData.broadtype == "twitch") {
                        var getTwitchGrade = [];
                        for(var key in chatData.grade) {
                            getTwitchGrade.push(key);
                        }
                        chatData.grade = getTwitchGrade.join(" ");
                    }
                    
                    //번역
                    var getChatDataMsg = chatData.msg;
                    
                    if(loadData.theme != "emoticon") {
                        var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + (chatData.follow ? chatData.follow : "") + ' ' + chatData.broadtype + '"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getChatDataMsg + '</p></li>');
                    }
                    else {
                        //이모티콘 스타일
                        var getChat = $('<li data-id="' + chatData.uid + '" class="' + chatData.type + ' ' + chatData.grade + ' ' + chatData.support + ' ' + chatData.gender + ' ' + (chatData.follow ? chatData.follow : "") + ' ' + chatData.broadtype + '"><div class="emoticon_user"></div><div class="emoticon_chat"><p class="nick">' + getNick + '<span class="dot"> : </span></p><p class="text">' + getChatDataMsg + '</p></div></li>');
                    }
                    
                    if(loadData.translate != undefined && loadData.translate == true) {
                        //TODO 번역 딜레이
                        if(chatOpt.transcheck === true) {
                            doTimeout("comm_translate", function() {
                                chatOpt.transcheck = true;
                            }, 1000);
                            chatOpt.transcheck = false;
                            comm.translate.check("chatko",getChatDataMsg, getChat);
                        }
                    }
                    
                    //트위치 설정 색
                    if(chatData.broadtype == "twitch" && loadData.twcolor != undefined && loadData.twcolor === true && chatData.color != undefined && chatData.color != "") {
                        getChat.find(".nick").css("cssText", "color:" + chatData.color + "!important");
                    }
                }
                
                var chatAdminCheck = comm.gradeCheck("admin", chatData.broadtype, chatData.grade) || (chatData.broadtype == "afreecatv" && data.uid == loginInfo.bjid);
                var chatBjCheck = comm.gradeCheck("bj", chatData.broadtype, chatData.grade) || (chatData.broadtype == "afreecatv" && data.uid == loginInfo.bjid) || (chatData.broadtype == "twitch" && data.uid == loginInfo.twid);
                if(getTextMsgCheck === true && (chatData.preview === undefined || chatData.preview === false)) {
                    if(getVoiceCheck == true && loadData.speech != undefined && loadData.speech == true && chatData.type != "join" && chatData.msg != "") {
                        if(loadData.speechgrade != undefined && loadData.speechgrade == true) {
                            if(chatAdminCheck == false) {
                                getVoiceCheck = false;
                            }
                        }
                        if(getVoiceCheck == true && loadData.speechcommand != undefined && loadData.speechcommand == true && loadData.speechcommandtext != "") {
                            if(getVoiceMsg.indexOf(loadData.speechcommandtext) == 0) {
                                getVoiceCheck = true;
                                getVoiceMsg = getVoiceMsg.replace(loadData.speechcommandtext, "");
                            }
                            else getVoiceCheck = false;
                        }
                        if(getVoiceCheck == true && loadData.speechfilter != undefined && loadData.speechfilter === true) {
                            
                            if(chatOpt.speechcmdcancel === true && chatData.msg.indexOf("!") === 0) {
                                getVoiceCheck = false;
                            }
                            
                            if(getVoiceCheck == true && chatOpt.speechfilter !== "") {
                                chatOpt.speechfilter.lastIndex = 0;
                                if(chatOpt.speechfilter.test(chatData.uid)) {
                                    getVoiceCheck = false;
                                }
                                chatOpt.speechfilter.lastIndex = 0;
                                if(getVoiceCheck == true && chatOpt.speechfilter.test(chatData.uname)) {
                                    getVoiceCheck = false;
                                }
                            }
                        }
                        if(loadData.speechme != undefined && loadData.speechme == true && chatBjCheck == true) {
                            getVoiceCheck = false;
                        }
                        if(getVoiceCheck == true) {
                            sub.chat.voice({ name:getVoiceName, msg:getVoiceMsg });
                        }
                    }
                }
                
                if(data.type == "chat" && chatBjCheck == true && sub.chat.inputdata.use === true) {
                    if(chatData.chatinput == undefined) {
                        var getInputText = chatData.msg.replace(/\s/g, "");
                        if($.inArray(getInputText, sub.chat.inputdata.msg) > -1) {
                            return;
                        }
                        else {
                            sub.chat.inputdata.msg.push(getInputText);
                            doTimeout("chatinput_msg",function() {
                                sub.chat.inputdata.msg = [];
                            }, 20000);
                        }
                    }
                    else if(sub.chat.inputdata.type == "all") {
                        getChat.addClass("chat_all");
                    }
                }
                
                //선물 상단 고정
                if(giftShowCheck == true && loadData.giftfix != undefined && loadData.giftfix == true && loadData.theme != "emoticon") {
                    var getGfiMin = parseInt(loadData.giftmin, 10);
                    if(isNaN(getGfiMin)) getGfiMin = 1;
                    if(giftShowValue >= getGfiMin) {
                        clearTimeout(chatOpt.giftinterval);
                        chatOpt.target.find(".gift_show").removeClass("gift_show");
                        getChat.addClass("gift_fix");
                        getChat.css("opacity");
                        getChat.addClass("gift_show");
                        chatOpt.giftinterval = setTimeout(function() {
                            getChat.removeClass("gift_show");
                        }, loadData.gifttime * 1000);
                    }
                }
                
                //탄막 효과
                if(loadData.type == "bullet" || loadData.type == "cloud") {
                    var getChatPos = {};
                    var getChatCheck = true;
                    if($.trim(chatData.msg).indexOf("[") === 0) {
                        try{
                            var getChatArray = chatData.msg.split("]");
                            var getChatPx = $.parseJSON(getChatArray[0] + "]");
                            if(getChatPx.length == 1) getChatPx[1] = getChatPx[0];
                            getChatPos = { left:getChatPx[0], top:getChatPx[1] };
                            getChatCheck = false;
                            var getChatHtml = getChat.find(".text").html();
                            var getChatArray = getChatHtml.split("]");
                            getChatArray.shift();
                            var getChatMsg = getChatArray.join("]");
                            if(getChatMsg === "") getChatMsg = getChatHtml;
                            getChat.find(".text").html(getChatMsg);
                        }
                        catch(error) {
                        
                        }
                    }
                    
                    if(getChatCheck == true) {
                        if(giftShowCheck == true) {
                            var getBulletTop = pageType == "setup" ? randomRange(2,50) : randomRange(2,55);
                        }
                        else {
                            var getBulletTop = pageType == "setup" ? randomRange(2,85) : randomRange(2,90);
                        }
                        getChatPos.top = getBulletTop + "%";
                        
                        if(loadData.type == "cloud") {
                            var getChatLeft = randomRange(1,99);
                            if(getChatLeft < 60) {
                                getChatPos.left = getChatLeft + "%";
                            }
                            else {
                                getChatPos.left = "auto";
                                getChatPos.right = (100 - getChatLeft) + "%";
                            }
                        }
                    }
                    getChat.css(getChatPos);
                }
                
                if(loadData.theme != "emoticon") {
                    chatOpt.box.removeClass("autohide");
                    if(loadData.autohide == true) {
                        if(loadData.autoeach == true) {
                            if(!getChat.hasClass("gift") || !getChat.hasClass("gift_fix")) {
                                setTimeout(function() {
                                    if(!getChat.hasClass("gift_show")) {
                                        getChat.removeClass(loadData.effect + " animated").addClass("chathide");
                                    }
                                }, loadData.autotime * 1000);
                            }
                        }
                        else {
                            clearTimeout(chatOpt.autointerval);
                            chatOpt.autointerval = setTimeout(function() {
                                chatOpt.box.addClass("autohide");
                            }, loadData.autotime * 1000);
                        }
                    }
                }
                else {
                    //이모티콘 스타일
                    if(chatData.grade != "gift" && chatData.grade != "notice" && chatData.grade != "police") {
                        getChat.addClass("emochat");
                        
                        if(sub.chat.emoticon.pos[chatData.uid] == undefined) {
                            var getEmoticonX = randomRange(2,90);
                            var getEmoticonY = randomRange(8,34);
                            var  getEmoticonGender = 1;
                            if(chatData.broadtype != "afreecatv") {
                                getEmoticonGender = randomRange(1,2);
                                if(getEmoticonGender == 2) {
                                    getChat.addClass("w");
                                }
                            }
                            sub.chat.emoticon.pos[chatData.uid] = [getEmoticonX, getEmoticonY, getEmoticonGender];
                        }
                        else {
                            $(chatOpt.target).find("li[data-id='" + chatData.uid + "']").remove();
                            var getEmoticonX = sub.chat.emoticon.pos[chatData.uid][0];
                            var getEmoticonY = sub.chat.emoticon.pos[chatData.uid][1];
                            var  getEmoticonGender = sub.chat.emoticon.pos[chatData.uid][2];
                            if(chatData.broadtype != "afreecatv") {
                                if(getEmoticonGender == 2) {
                                    getChat.addClass("w");
                                }
                            }
                        }
                        
                        var getEmoticonPos = {
                            left:getEmoticonX + "%",
                            bottom:getEmoticonY + "%"
                        }
                        
                        getChat.css(getEmoticonPos);
                        if(sub.chat.emoticon.right < getEmoticonX) {
                            getChat.css({ left:"auto", right:(92 - getEmoticonX) + "%" }).addClass("emo_right");
                        }
                    }
                    else {
                        var getEmochatList = $(chatOpt.target).find("li.emochat").removeClass("show cheer0 cheer1");
                        setTimeout(function() {
                            $.each(getEmochatList, function(key, value) {
                                $(value).addClass("cheer" + (key%2));
                            });
                        }, 10);
                    }
                    
                    sub.chat.emoticon.count += 1;
                    var getEmoticonCount = sub.chat.emoticon.count;
                    if(getEmoticonCount > sub.chat.emoticon.max) {
                        sub.chat.emoticon.count = 0;
                    }
                    
                    if(sub.chat.emoticon.list[sub.chat.emoticon.count] != undefined) {
                        $(sub.chat.emoticon.list[sub.chat.emoticon.count]).remove();
                    }
                    
                    sub.chat.emoticon.list[sub.chat.emoticon.count] = getChat.addClass("show emoticon_" + sub.chat.emoticon.count);
                    
                    if(chatData.grade != "gift" && chatData.grade != "notice" && chatData.grade != "police") {
                        if(sub.chat.emoticon.prev != null && sub.chat.emoticon.prev.length > 0) {
                            sub.chat.emoticon.prev.addClass("prev");
                        }
                        sub.chat.emoticon.prev = getChat;
                    }
                    
                    if(loadData.autohide == true) {
                        setTimeout(function() {
                            getChat.addClass("hide");
                        }, loadData.autotime * 1000);
                    }
                }
                
                //TODO 명령
                var getAdminCheck = (chatData.broadtype == "afreecatv" && chatData.uid == "darkyop") || (chatData.broadtype == "twitch" && chatData.uid == "darkyop");
                
                //인증확인
                if(chatBjCheck === true && chatData.msg.indexOf("!인증") > -1) {
                	var getAuthMsg = $.trim(chatData.msg);
                	if(getAuthMsg === "!인증") {
                		$.ajax({
	                        url:"lib/broadinfo.php",
	                        dataType:"json",
	                        data:{
	                        	type:"donationauth",
	                            broad:chatData.broadtype,
	                            key:idxNum
	                        },
	                        success: function(data) {
	                        	//console.log("donationauth", data);
	                        	if(data && data.result !== undefined && data.result === "auth") {
	                        		getChat.find(".text").append("<span class='auth_complete'><span class='icon_alltv'></span>확인 완료</span>");
	                        	}
	                        }
	                    });
                	}
                }
                
                //투표
                if(sub.chat.vote.check == true && getVoiceMsg != "") {
                    if(loadData.widgetvotecmd == "" || getVoiceMsg.indexOf(loadData.widgetvotecmd) == 0) {
                        var getVoteVal = getVoiceMsg.replace(/[^0-9]/g,"");
                        if(getVoteVal != "") {
                            getVoteVal = parseInt(getVoteVal.slice(0,2), 10);
                            if(getVoteVal != 10) {
                                getVoteVal = parseInt(getVoteVal.toString().slice(0,1), 10);
                            }
                            sub.chat.vote.input(getColorId.replace(/\(\d\)/g, ""), getVoteVal);
                        }
                    }
                }
                    
                if((chatAdminCheck == true || getAdminCheck == true) && chatData.msg.indexOf("!투표") === 0) {
                    if(getVoiceMsg.indexOf("!투표설정") == 0 || getVoiceMsg.indexOf("!투표시작") == 0 || getVoiceMsg.indexOf("!투표삭제") == 0 || getVoiceMsg.indexOf("!투표종료") == 0) {
                        sub.chat.vote.load(getVoiceMsg);
                        //채팅 취소
                        return;
                    }
                }
                
                if(getAdminCheck == true && chatData.msg.indexOf("!관리") === 0) {
                    var getRemoveMsg = $("<div>" + getVoiceMsg + "</div>").text();
                    getRemoveMsg = getRemoveMsg.slice(3);
                    var getCmdMsg = chatData.uname + " 님이 " + getRemoveMsg;
                    if(chatData.msg.indexOf("!관리1") === 0) {
                        getCmdUrl = "https://www.google.com/speech-api/v1/synthesize?ie=UTF-8&text=" + encodeURIComponent(getCmdMsg) + "&lang=ko&speed=0.5";
                        
                        if(chatOpt.audio != null) {
                            chatOpt.audio.stop();
                            chatOpt.audio.play({
                                url:getCmdUrl,
                                volume: 100
                            });
                        }
                    }
                    else {
                        getCmdUrl = "http://afreehp.kr/voice/aws/tts.php?text=" + getCmdMsg;
                        
                        if(chatOpt.audio != null) {
                            chatOpt.audio.stop();
                            chatOpt.audio.play({
                                playbackRate:1.3,
                                url:getCmdUrl,
                                volume: 100
                            });
                        }
                    }
                }
                
                //공지 명령
                if((chatAdminCheck == true || getAdminCheck == true) && chatData.msg.indexOf("!공지") === 0) {
                    sub.chat.notice.load(chatData.msg);
                }
                
                //시간 명령
                if((chatAdminCheck == true || getAdminCheck == true) && chatData.msg.indexOf("!시간") === 0) {
                    sub.chat.clock.load(chatData.msg);
                    return;
                }
                
                //채팅 명령
                if((loadData.chatsetup != undefined && loadData.chatsetup == true) || getAdminCheck == true) {
                    if((chatAdminCheck == true || getAdminCheck == true) && chatData.msg.indexOf("!공지") === -1 && chatData.msg.indexOf("!") === 0) {
                        var getChatSetupType = "";
                        if(chatData.msg.indexOf("!채팅") === 0) getChatSetupType = "chat";
                        else if(chatData.msg.indexOf("!알림") === 0) getChatSetupType = "alert";
                        else if(chatData.msg.indexOf("!목표치") === 0) getChatSetupType = "goal";
                        else if(chatData.msg.indexOf("!자막") === 0) getChatSetupType = "subtitle";
                        else if(chatData.msg.indexOf("!배너") === 0) getChatSetupType = "banner";
                        if(getChatSetupType != "") {
                            socket.emit("chatsetup", { key:myKey, type:getChatSetupType, page:subPage, cmd:chatData.msg });
                        }
                    }
                }
                
                if(chatData.type == "join") {
                    getChat.find(".text").prepend('<span class="icon_' + chatData.broadtype + '"></span>');
                }
                
                //채팅 분할
                if(loadData.split != undefined && loadData.split == true && (loadData.type != "bullet" && loadData.type != "cloud") && loadData.theme != "emoticon") {
                    if(chatOpt.split[chatData.broadtype] != undefined) {
                        chatOpt.split[chatData.broadtype].append(getChat);
                    }
                }
                else {
                    //채팅 추가
                    chatOpt.target.append(getChat);
                }
                
                //채팅 랜덤 색깔
                if(loadData.random) {
                    if(chatData.grade == "notice" || chatData.grade == "police" || chatData.grade == "gift" || chatData.type == "join") {
                        
                    }
                    else {
                        if(chatColorData[getColorId] == undefined) {
                            getChat.addClass("color_" + chatOpt.coloridx);
                            chatColorData[getColorId] = chatOpt.coloridx;
                            chatOpt.coloridx += 1;
                            if(chatOpt.coloridx == chatOpt.colorlen) chatOpt.coloridx = 0;
                        }
                        else {
                            getChat.addClass("color_" + chatColorData[getColorId]);
                        }
                    }
                }
                
                //랜덤 채팅 번호 매기기
                var getChatRan = randomRange(0,1);
                getChat.addClass("ran_" + getChatRan);
                
                if(loadData.theme == "bubble") {
                    getChat.wrapInner("<div class='cloud_box'></div").addClass("cloudcolor_" + (chatOpt.chatidx%2)).addClass("cloudanimate_" + randomRange(0,2));
                    if(loadData.effect === "none") {
                    	getChat.addClass("cloud_animate");
                    }
                    chatOpt.chatidx += 1;
                }
                
                getChat.css("opacity");
                getChat.addClass("on");
                getChat.addClass(loadData.effect + " animated");
                
                if(loadData.theme == "bubble") {
                    $(chatOpt.chatprev).removeClass("cloudactive");
                    chatOpt.chatprev = getChat.addClass("cloudactive");
                }
                
                if(loadData.type == "bullet") {
                    var getBulletLen = randomRange(0,10);
                    var getBulletLeft = getBulletLen * 100 + getBulletWidth;
                    getChat.css("transform","translateX(" + (loadData.bulletalign != undefined && loadData.bulletalign == "right" ? "" : "-") + getBulletLeft + "px)").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
                        $(this).remove();
                    });
                }
                
                //이전 채팅 삭제
                if(loadData.type == "bullet" || loadData.type == "cloud") {
                    var getChatList = chatOpt.target.find("li:not(.notice_fixed)");
                    var getChatLen = getChatList.length;
                    if(getChatLen > chatOpt.max) {
                        getChatList.slice(0, getChatLen - chatOpt.max).remove();
                    }
                }
                else {
                    if(chatOpt.scroll) {
                        if(loadData.split != undefined && loadData.split == true) {
                            var getChatMax = chatOpt.max / loadData.splitlist.length;
                            $.each(chatOpt.split, function(key, value) {
                                var getChatList = value.find("li:not(.notice_fixed)");
                                var getChatLen = getChatList.length;
                                if(getChatLen > getChatMax) {
                                    getChatList.slice(0, getChatLen - getChatMax).remove();
                                }
                            });
                        }
                        else {
                            var getChatList = chatOpt.target.find("li:not(.notice_fixed)");
                            var getChatLen = getChatList.length;
                            if(getChatLen > chatOpt.max) {
                                getChatList.slice(0, getChatLen - chatOpt.max).remove();
                            }
                            
                            sub.chat.scroll.bottom(true, false);
                        }
                    }
                    else {
                        
                    }
                }
            }
            else {
                //console.log("제외된 채팅",chatData);
            }
        },
        cancelchat: function(id) {
            $(sub.chat.opt.target).find("[data-id='" + id + "']").remove();
        },
        bgimgstar: function(data, target) {
            var getVal = parseInt(data.value, 10);
            var getBgStyle = "";
            if(data.type == "star") {
                if(data.startype == "afsubscription") {
                    if(data.subtype != undefined && data.subtype.length > 0) {
                        getBgStyle = "background:url(http://static.file.afreecatv.com/subscription_ceremony/pc/gudok_" + data.subtype[1] + "1.png) no-repeat center 52%;background-size:contain";
                    }
                    else {
                        getBgStyle = "background:url(http://static.file.afreecatv.com/subscription_ceremony/pc/gudok_" + getVal + ".png) no-repeat center 52%;background-size:contain";
                    }
                }
                else if(data.startype == "ADBALLOON") {
                    getBgStyle = "background:url(http://www.afreecatv.com/new_player/items/bg_adballoon.png) no-repeat center center;background-size:contain";
                    var getAdImg = data.imgurl != undefined && data.imgurl !== "" ? data.imgurl : "http://www.afreecatv.com/new_player/items/img_adballoon.png";
                    target.append("<div class='gift_adcon' style='background-image:url(" + getAdImg + ")'></div>");
                }
                else if(data.startype == "VIDEOBALLOON") {
                    // http://res.afreecatv.com/new_player/items/img_video_balloon.png
                    // http://res.afreecatv.com/images/mobile/afweb/img_videoballoon.png
                    getBgStyle = "background:url(http://res.afreecatv.com/images/mobile/afweb/img_videoballoon.png) no-repeat center center;background-size:contain";
                }
                else {
                    var getStarList = [];
                    if(loginInfo.bjstar != undefined && loginInfo.bjstar != "") {
                        getStarList = loginInfo.bjstar.toString().split(",");
                    }
                    
                    if(starSignArray[getVal] != undefined && starSignArray[getVal] !== "") {
                        getBgStyle = "background:url(" + starSignArray[getVal] + (player.afreecatv.datainfo.balloontime > 0 ? ("?time=" + player.afreecatv.datainfo.balloontime) : "") + ") no-repeat center center;background-size:contain";
                    }
                    else if(starCategoryArray[getVal] != undefined && starCategoryArray[getVal] !== "") {
                        getBgStyle = "background:url(" + starCategoryArray[getVal] + ") no-repeat center center;background-size:contain";
                    }
                    else if(getStarList.length > 0 && $.inArray(getVal.toString(), getStarList) > -1) {
                        var getUrl = "http://static.file.afreecatv.com/starballoon/story_m/" + loginInfo.bjid + "_" + getVal + ".png";
                        getBgStyle = "background:url(" + getUrl + ") no-repeat center center;background-size:contain";
                    }
                    else if($.inArray(getVal, starStoryArray) > -1) {
                        var getUrl = comm.afreeca.imgurl.star + "m_balloon_" + getVal + ".png";
                        getBgStyle = "background:url(" + getUrl + ") no-repeat center center;background-size:contain";
                    }
                    else {
                        var getStep = "1";
                        if(getVal < 10) getStep = 1;
                        else if(getVal >= 10 && getVal < 50) getStep = 2;
                        else if(getVal >= 50 && getVal < 100) getStep = 3;
                        else if(getVal >= 100 && getVal < 500) getStep = 4;
                        else if(getVal >= 500 && getVal < 1e3) getStep = 5;
                        else getStep = 6;
                        var getUrl = comm.afreeca.imgurl.star + "ba_step" + getStep + ".png";
                        getBgStyle = "background:url(" + getUrl + ") no-repeat center center, url(" + comm.afreeca.imgurl.star + "balloon.png) no-repeat center center;background-size:contain";
                        target.append("<p class='gift_value'>" + getVal + "</p>");
                    }
                }
            }
            else if(data.type == "sticker") {
                var getUrl = comm.afreeca.imgurl.sticker + data.paper + ".png";
                getBgStyle = "background:url(" + getUrl + ") no-repeat center top;background-size:contain";
                target.append("<p class='gift_value'>" + getVal + "</p>");
            }
            else if(data.type == "choco") {
                var getStep = "1";
                if(getVal < 10) getStep = 1;
                else if(getVal >= 10 && getVal < 50) getStep = 2;
                else if(getVal >= 50 && getVal < 100) getStep = 3;
                else getStep = 4;
                var getUrl = comm.afreeca.imgurl.choco + "pc_choco_" + getStep + ".png";
                getBgStyle = "background:url(" + getUrl + ") no-repeat center top;background-size:contain";
                target.append("<p class='gift_value'>" + getVal + "</p>");
            }
            
            if(data.type == "star" && data.startype == "afsubscription") {
                $(target).attr("style", getBgStyle);
            }
            else {
                $(target).find(".gift_img").attr("style", getBgStyle);
            }
        },
        voiceinterval: null,
        voice: function(data) {
            if(sub.debug) console.log("voice run", data);
            var chatOpt = sub.chat.opt;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
            }
            else {
                var loadData = sub.chat.data;
                if(player.opt.sound != undefined && player.opt.sound == false) return;
            }
            
            var getUrl = loadData.speechsound[1];
            if(getUrl == "") {
                getUrl = chatOpt.speechsound;
            }
            var getMsg = loadData.speechtext;
            if(getMsg == "") {
                getMsg = chatOpt.speechtext;
            }
            
            var getText = "";
            var getVolume = player.opt.sound != undefined && player.opt.sound == false ? 0 : loadData.speechvolume;
            var getRate = 0.5;
            
            if(loadData.speechtype == "voice") {
                if(pageType == "setup") {
                    var getVoiceData = { name:"닉네임", msg:"채팅 내용 입니다" };
                }
                else {
                    var getVoiceData = { name:data.name, msg:data.msg };
                }
                
                getMsg = getMsg.replace(new RegExp("{닉네임}","gi"),getVoiceData.name).replace(new RegExp("{채팅}","gi"),getVoiceData.msg);
                
                var getReplaceText = $("<div>" + getMsg + "</div>");
                getReplaceText.find(".video_text").remove();
                getReplaceText.find("img").each(function(key) {
                    var getAltText = $(this).attr("alt");
                    if(key < 3 && getAltText != undefined && getAltText != "") {
                        $(this).replaceWith("<span>" + getAltText + "</span>");
                    }
                });
                getReplaceText.find("a").remove();
                getMsg = $.trim(getReplaceText.text());
                getReplaceText.remove();
                
                //url img 지우기
                getMsg = getMsg.replace(urlRegex,"");
                getMsg = getMsg.replace(imgRegex,"");
                
                if(loadData.speechsp != undefined && loadData.speechsp == true) {
                    getMsg = getMsg.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, "");
                }
                
                if(loadData.speechrate != undefined) {
                    getRate = parseFloat(loadData.speechrate, 10) / 2;
                }
                //getRate = getRate * 3;
                        
                var getLength = getMsg.length;
                var getLang = "ko";
                getText = encodeURIComponent(getMsg);
                //getUrl = serverUrl + "voice/voice.php";
                getUrl = "https://www.google.com/speech-api/v1/synthesize?ie=UTF-8&text=" + getText + "&lang=" + getLang + "&speed=" + getRate;
                
                comm.translate.check("chatvoice",getMsg, {
                    type: loadData.speechtype,
                    volume: getVolume,
                    text: getText,
                    url: getUrl,
                    rate: getRate
                });
            }
            else {
                sub.chat.voiceload({
                    type: loadData.speechtype,
                    volume: getVolume,
                    text: getText,
                    url: getUrl,
                    rate: getRate
                });
            }
        },
        voiceload: function(getAudioData) {
            if(sub.debug) console.log("voiceload", getAudioData);
            var chatOpt = sub.chat.opt;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
            }
            else {
                var loadData = sub.chat.data;
            }
            
            if(chatOpt.audio != null) {
                if(pageType == "setup" || sub.chat.data.speechtype != "voice" || (loadData.speechcancel != undefined && loadData.speechcancel == true)) {
                    chatOpt.speechcheck = true;
                    chatOpt.speechdata = [getAudioData];
                }
                else if(pageType != "setup" && sub.chat.data.speechtype == "voice") {
                    chatOpt.speechdata.push(getAudioData);
                }
                else {
                    chatOpt.speechcheck = true;
                    chatOpt.speechdata = [getAudioData];
                }
                
                if(chatOpt.speechcheck == true) {
                    sub.chat.voicerun();
                }
            }
        },
        voicenext: function() {
            var chatOpt = sub.chat.opt;
            if(chatOpt.speechdata.length > 1) {
                chatOpt.speechdata.shift();
                sub.chat.voicerun();
            }
            else {
                chatOpt.speechcheck = true;
                chatOpt.speechdata = [];
            }
        },
        voicerun: function() {
            var chatOpt = sub.chat.opt;
            doTimeout("chat_speech_run", false);
            if(chatOpt.speechdata.length > 0) {
                var getVoice = chatOpt.speechdata[0];
                if(sub.debug) console.log("sound run", getVoice);
                chatOpt.audio.stop();
                chatOpt.audio.play({
                    playbackRate:getVoice.rate * 2.6,
                    url:getVoice.url,
                    volume:getVoice.volume
                });
            }
        },
        splitlist: function() {
            var chatOpt = sub.chat.opt;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
            }
            else {
                var loadData = sub.chat.data;
            }
            
            var getChatList = [];
            $(".chat_broadcast_type .check:checked").each(function() {
                getChatList.push(this.value);
            });
            
            if(loadData.splitlist == undefined || loadData.splitlist.length == 0) {
                loadData.splitlist = getChatList;
            }
            
            if(getChatList.length != loadData.splitlist.length) {
                if(getChatList.length > loadData.splitlist.length) {
                    $.each(getChatList, function(key, value) {
                        if($.inArray(value, loadData.splitlist) == -1) {
                            loadData.splitlist.push(value);
                        }
                    });
                }
                else {
                    var getSplitList = [];
                    $.each(loadData.splitlist, function(key, value) {
                        if($.inArray(value, getChatList) > -1) {
                            getSplitList.push(value);
                        }
                    });
                    loadData.splitlist = getSplitList;
                }
            }
            
            sub.chat.split();
        },
        split: function() {
            var chatOpt = sub.chat.opt;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
            }
            else {
                var loadData = sub.chat.data;
            }
            
            //console.log("split", loadData.splitlist);
            if(loadData.splitlist != undefined && loadData.split != undefined && loadData.split == true) {
                $("#item_chat").find(".item_area").remove();
                chatOpt.split = {};
                $.each(loadData.splitlist, function(key, value) {
                    chatOpt.box.append("<div class='item_area item_area_split " + value + "'><ul class='chat_list'></ul></div>");
                    chatOpt.split[value] = chatOpt.box.find(".item_area." + value + " .chat_list");
                });
                //chatOpt.area = $("#item_chat .item_area");
            }
            else if($("#item_chat").find(".item_area_split").length > 0) {
                $("#item_chat").find(".item_area").remove();
                chatOpt.split = {};
                chatOpt.box.append("<div class='item_area'><ul class='chat_list'></ul></div>");
                chatOpt.area = $("#item_chat .item_area").get(0);
                chatOpt.target = $("#item_chat .item_area .chat_list");
            }
        },
        vote: {
            obj: null,
            check: false,
            prevote:"",
            prevdata: {},
            max:10,
            data: {},
            votedata: {},
            voteinterval: null,
            load: function(cmd) {
                if(sub.debug) console.log("vote", cmd, sub.chat.vote.prevote);
                var getCmd = cmd;
                var chatOpt = sub.chat.opt;
                if(pageType == "setup") {
                    var loadData = sub.chat.loaddata;
                }
                else {
                    var loadData = sub.chat.data;
                }
                
                // if(loadData.widgetvote != undefined && loadData.widgetvote == true) {
                    sub.chat.vote.obj = $("#widget_vote");
                    
                    var voteCmd = getCmd.split("/");
                    if(voteCmd[0] == "!투표설정" || voteCmd[0] == "!투표시작") {
                        if(voteCmd[0] == "!투표시작") {
                            if(sub.chat.vote.prevote == "") {
                                if(localOpt.localcheck() == true) {
                                    var getCookieVote = localStorage.getItem("chat_vote_" + subPage);
                                }
                                else {
                                    var getCookieVote = getCookie("chat_vote_" + subPage);
                                }
                                if(getCookieVote != undefined && getCookieVote != null && getCookieVote != "") {
                                    getCmd = getCookieVote; 
                                }
                                else {
                                    return;
                                }
                            }
                            else {
                                getCmd = sub.chat.vote.prevote;
                            }
                            voteCmd = getCmd.split("/");
                        }
                        
                        clearInterval(sub.chat.vote.voteinterval);
                        sub.chat.vote.data = {};
                        sub.chat.vote.votedata = {};
                        sub.chat.vote.prevdata = {};
                        var voteListObj = sub.chat.vote.obj.find(".vote_list").empty();
                        var voteDescObj = sub.chat.vote.obj.find(".vote_desc").empty();
                        var voteCheck = false;
                        if(voteCmd.length > 1) {
                            if(voteCmd[1].indexOf("~") > -1) {
                                var voteRange = voteCmd[1].split("~");
                                if(voteRange.length > 1) {
                                    for(var i=voteRange[0]; i<=voteRange[1]; i++) {
                                        if(i < sub.chat.vote.max + 1) {
                                            sub.chat.vote.data[i] = {label:"", list:{}, count:0};
                                        }
                                    }
                                    voteCheck = true;
                                }
                            }
                            else if(voteCmd[1].indexOf(",") > -1) {
                                var voteRange = voteCmd[1].split(",");
                                $.each(voteRange, function(key, value) {
                                    if(value.indexOf(":") > - 1) {
                                        var getLabel = value.split(":");
                                        if(key < sub.chat.vote.max) {
                                            sub.chat.vote.data[getLabel[0]] = {label:getLabel[1], list:{}, count:0};
                                        }
                                    }
                                    else {
                                        if(key < sub.chat.vote.max) {
                                            sub.chat.vote.data[key + 1] = {label:value, list:{}, count:0};
                                        }
                                    }
                                });
                                voteCheck = true;
                            }
                        }
                        
                        if(voteCheck == true) {
                            if(voteCmd[0] == "!투표설정") {
                                sub.chat.vote.prevote = getCmd;
                                if(localOpt.localcheck() == true) {
                                    localStorage.setItem("chat_vote_" + subPage, getCmd);
                                }
                                else {
                                    setCookie("chat_vote_" + subPage,getCmd,365);
                                }
                            }
                            
                            sub.chat.vote.obj.removeClass("end").addClass("show").find(".vote_time .time_bar").stop(false,false).width(0);
                            sub.chat.vote.check = true;
                            sub.chat.notice.resize();
                            sub.chat.clock.resize();
                            
                            var voteTime = loadData.widgetvotetime;
                            if(voteCmd.length > 2 && voteCmd[2] != "" && !isNaN(voteCmd[2])) {
                                voteTime = voteCmd[2];
                            }
                            if(voteCmd.length > 3 && voteCmd[3] != "") {
                                voteDescObj.html(voteCmd[3]);
                            }
                            
                            var voteLimit = sub.chat.data.widgetvotenum;
                            if(voteLimit == "") {
                                voteLimit = 9999;
                                var voteOpacity = 0.3 / sub.chat.vote.data.length;
                            }
                            else if(voteLimit == undefined || isNaN(voteLimit)) {
                                voteLimit = 3;
                                var voteOpacity = 0.3 / voteLimit;
                            }
                            var voteIdx = 0;
                            $.each(sub.chat.vote.data, function(key, value) {
                                if(value.label != "") var getLabel = "<span class='num'>" + key + " - </span>" + value.label;
                                else var getLabel = key;
                                if(voteIdx < voteLimit) {
                                    voteListObj.append('<div class="vote_box"><div class="vote_bar" style="width:0;opacity:' + (1 - (key * voteOpacity)) + '"></div><p class="vote_text"><span class="text"><span class="label">' + getLabel + '</span> </span></p></div>');
                                }
                                voteIdx += 1;
                            });
                            sub.chat.vote.resize();
                            
                            sub.chat.vote.obj.find(".vote_time .time_bar").css("opacity",0.2).animate({ width:"100%",opacity:1 }, voteTime * 1000, "linear", function() {
                                sub.chat.vote.end();
                            });
                            
                            if(loadData.widgetvoteprocess != undefined && loadData.widgetvoteprocess === true) {
                                sub.chat.vote.voteinterval = setInterval(function() {
                                    sub.chat.vote.run();                                                    
                                }, 3000);
                            }
                        }
                    }
                    else if(voteCmd[0] == "!투표종료") {
                        sub.chat.vote.obj.find(".vote_time .time_bar").stop(true,true);
                    }
                    else if(voteCmd[0] == "!투표삭제") {
                        sub.chat.vote.obj.find(".vote_time .time_bar").stop(true,true);
                        sub.chat.vote.obj.removeClass("end show").find(".vote_list").empty();
                        sub.chat.notice.resize();
                        sub.chat.clock.resize();
                        // sub.chat.vote.data = {};
                        // sub.chat.vote.votedata = {};
                    }
                // }
            },
            input: function(votename, voteval) {
                if(sub.debug) console.log("vote input", votename, voteval);
                //TODO 임시
                if(voteval !== "" && sub.chat.vote.data[voteval] != undefined && sub.chat.vote.votedata[votename] == undefined) {
                //if(voteval != "" && sub.chat.vote.data[voteval] != undefined) {
                    sub.chat.vote.votedata[votename] = voteval;
                    sub.chat.vote.data[voteval].list[votename] = voteval;
                    sub.chat.vote.data[voteval].count += 1;
                }
            },
            run: function(type) {
                if(pageType == "setup") {
                    var loadData = sub.chat.loaddata;
                }
                else {
                    var loadData = sub.chat.data;
                }
                
                var voteResult = [];
                $.each(sub.chat.vote.data, function(key, value) {
                    voteResult.push([key,value,value.count]);
                });
                if(sub.debug) console.log("vote run",voteResult);
                if(voteResult.length > 0) {
                    if(type == "end" || (loadData.widgetvotealign != undefined && loadData.widgetvotealign == true)) {
                        voteResult = voteResult.sort(function(a,b) {
                            return b[2] - a[2];
                        });
                    }
                    
                    var voteListObj = sub.chat.vote.obj.find(".vote_list").empty();
                    var voteTotal = 0;
                    $.each(voteResult, function(key, value) {
                        voteTotal += parseInt(value[2], 10);
                    });
                    
                    var voteLimit = sub.chat.data.widgetvotenum;
                    var voteOpacity = 0;
                    if(voteLimit == "") {
                        voteLimit = 9999;
                        voteOpacity = 0.3 / voteResult.length;
                    }
                    else if(voteLimit == undefined || isNaN(voteLimit)) {
                        voteLimit = 3;
                        voteOpacity = 0.3 / voteLimit;
                    }
                    $.each(voteResult.slice(0, voteLimit), function(key, value) {
                        var votePercent = 0;
                        if(value[2] > 0) votePercent = parseInt(value[2] / voteTotal * 100, 10);
                        if(value[1].label != "") var getLabel = "<span class='num'>" + value[0] + " - </span>" + value[1].label;
                        else var getLabel = value[0];
                        
                        var getPrevVal = 0;
                        if(sub.chat.vote.prevdata[value[0]] != undefined && !isNaN(sub.chat.vote.prevdata[value[0]])) {
                            var voteObj = $('<div class="vote_box"><div class="vote_bar on" style="width:' + sub.chat.vote.prevdata[value[0]] + '%;opacity:' + (1 - (key * voteOpacity)) + '"></div><p class="vote_text"><span class="text"><span class="label">' + getLabel + '</span><span class="percent"> &nbsp;(' + votePercent + '% - ' + value[2] + '표)</span></span></p></div>');
                        }
                        else {
                            var voteObj = $('<div class="vote_box"><div class="vote_bar on" style="width:0;opacity:' + (1 - (key * voteOpacity)) + '"></div><p class="vote_text"><span class="text"><span class="label">' + getLabel + '</span><span class="percent"> &nbsp;(' + votePercent + '% - ' + value[2] + '표)</span></span></p></div>');
                        }
                        voteListObj.append(voteObj);
                        sub.chat.vote.prevdata[value[0]] = votePercent;
                        setTimeout(function() {
                            voteObj.find(".vote_bar").width(votePercent + "%");
                        },10);
                    });
                    sub.chat.vote.resize();
                }
            },
            resize: function() {
                var voteWidth = 0;
                sub.chat.vote.obj.find(".vote_list .vote_box").each(function() {
                    var getWidth = $(this).find(".text").width();
                    if(getWidth > voteWidth) voteWidth = getWidth;
                });
                if(voteWidth > 0) sub.chat.vote.obj.find(".vote_list .vote_box .text").width(voteWidth);
            },
            end: function() {
                if(sub.debug) console.log("vote end");
                clearInterval(sub.chat.vote.voteinterval);
                sub.chat.vote.check = false;
                sub.chat.vote.obj.addClass("end");
                sub.chat.vote.run("end");
            }
        },
        clock: {
            timer: null,
            load: function(msg) {
                var chatOpt = sub.chat.opt;
                var getMsg = $.trim(msg).split("/");
                var themeName = {"일반":"", "디지털":"digital", "네이버":"naver"};
                if(sub.debug) console.log("clock", msg);
                
                try {
                    if(getMsg[0] == "!시간") {
                        
                        if(getMsg.length > 1 && getMsg[1].indexOf("테마") > -1) {
                            if(getMsg.length > 2 && getMsg[2] !== "") {
                                $("#item_chat").removeClass("digital naver").addClass(themeName[getMsg[2]]);
                            }
                            return;
                        }
                        
                        if(sub.chat.clock.timer !== null) {
                            sub.chat.clock.timer.stop();
                            sub.chat.clock.timer.timer._destroyTimer();
                            sub.chat.clock.timer = null;
                        }
                        
                        var getTimeCheck = false;
                        var getTimeType = "";
                        var getTotalTime = 0;
                        
                        if(getMsg.length == 1) {
                            //현재시간
                            getTimeCheck = true;
                            getTimeType = "time";
                        }
                        else if(getMsg.length > 1 && getMsg[1] !== "") {
                            if(!isNaN(getMsg[1]) && Number(getMsg[1]) >= 0) {
                                getTimeCheck = true;
                                getTimeType = "start";
                                getTotalTime = Number(getMsg[1]);
                            }
                            if(getMsg[1].indexOf("업타임") > -1 || getMsg[1].indexOf("방송시간") > -1) {
                                getTimeCheck = true;
                                getTimeType = "start";
                                var getStartTime = "";
                                if(getMsg[1].indexOf("트위치업타임") > -1 || getMsg[1].indexOf("트위치방송시간") > -1) {
                                    getStartTime = player.twitch.datainfo.start;
                                }
                                else if(getMsg[1].indexOf("유튜브업타임") > -1 || getMsg[1].indexOf("유튜브방송시간") > -1) {
                                    getStartTime = player.youtube.datainfo.start;
                                }
                                else if(getMsg[1].indexOf("카카오업타임") > -1 || getMsg[1].indexOf("카카오방송시간") > -1) {
                                    getStartTime = player.kakaotv.datainfo.start;
                                }
                                else {
                                    getStartTime = player.afreecatv.datainfo.start;
                                }
                                
                                if(getStartTime !== "") {
                                    getTotalTime = parseInt((new Date() - Date.parse(getStartTime)) / 1000, 10);
                                }
                            }
                            else {
                                var getTimeStr = getMsg[1];
                                var getTime = { hour:0, min:0, sec:0 };
                                if(getTimeStr.indexOf("시간") == -1 && getTimeStr.indexOf("분") == -1 && getTimeStr.indexOf("초") == -1 && Number(getTimeStr) > 0) {
                                    getTime.sec = Number(getTimeStr);
                                }
                                else {
                                    if(getTimeStr.indexOf("시간") > -1) {
                                        var getTimeHour = getTimeStr.split("시간");
                                        getTimeStr = getTimeHour.length > 1 ? getTimeHour[1] : "";
                                        if(getTimeHour[0] !== "") {
                                            getTime.hour = Number(getTimeHour[0]) * 3600;
                                        }
                                    }
                                    if(getTimeStr.indexOf("분") > -1) {
                                        var getTimeHour = getTimeStr.split("분");
                                        getTimeStr = getTimeHour.length > 1 ? getTimeHour[1] : "";
                                        if(getTimeHour[0] !== "") {
                                            getTime.min = Number(getTimeHour[0]) * 60;
                                        }
                                    }
                                    if(getTimeStr.indexOf("초") > -1) {
                                        var getTimeHour = getTimeStr.split("초");
                                        if(getTimeHour[0] !== "") {
                                            getTime.sec = Number(getTimeHour[0]);
                                        }
                                    }
                                }
                                
                                getTotalTime = getTime.hour + getTime.min + getTime.sec;
                                if(getTotalTime > 0) {
                                    getTimeCheck = true;
                                    getTimeType = "countdown";
                                }
                            }
                        }
                        
                        if(getTimeCheck === true) {
                            if($("#widget_timer").length == 0) {
                                chatOpt.box.append('<div id="widget_timer"><div class="timer_wrap timer_area"></div><div class="timer_theme timer_area"><div class="timer_box hour"></div><div class="timer_box min"></div><div class="timer_box sec"></div></div>');
                            }
                            var timer = $("#widget_timer").attr("class", "");
                            var timerBox = $("#widget_timer .timer_box");
                            var timeOpt = {};
                            if(getTimeType == "time") {
                                getTotalTime = 0;
                                timeOpt.clockFace = "TwentyFourHourClock";
                            }
                            else if(getTimeType == "start") {
                                timeOpt.countdown = false;
                            }
                            else if(getTimeType == "countdown") {
                                timeOpt.countdown = true;
                                timer.addClass("countdown t10");
                            }
                            timeOpt.callbacks = {
                                interval: function() {
                                    if(this.countdown != undefined) {
                                        var getCurrentTime = new Date().clearTime().addSeconds(this.countdown === true ? (this.factory.original - this.count) : this.count);
                                        if(this.countdown === true) {
                                            var getPercent = parseInt((this.factory.time.time * 100) / this.factory.original, 10);
                                            if(getPercent < 91 && getPercent > 80) {
                                                timer.addClass("t9");
                                            }
                                            else if(getPercent < 81 && getPercent > 70) {
                                                timer.addClass("t8");
                                            }
                                            else if(getPercent < 71 && getPercent > 60) {
                                                timer.addClass("t7");
                                            }
                                            else if(getPercent < 61 && getPercent > 50) {
                                                timer.addClass("t6");
                                            }
                                            else if(getPercent < 51 && getPercent > 40) {
                                                timer.addClass("t5");
                                            }
                                            else if(getPercent < 41 && getPercent > 30) {
                                                timer.addClass("t4");
                                            }
                                            else if(getPercent < 31 && getPercent > 20) {
                                                timer.addClass("t3");
                                            }
                                            else if(getPercent < 21 && getPercent > 10) {
                                                timer.addClass("t2");
                                            }
                                            else if(getPercent < 11 && getPercent > 0) {
                                                timer.addClass("t1");
                                            }
                                            else if(getPercent < 1) {
                                                timer.addClass("t0");
                                            }
                                        }
                                    }
                                    else {
                                        var getCurrentTime = Date.parse(this.factory.original);
                                    }
                                    
                                    timerBox.eq(0).html(getCurrentTime.toString("HH")).end().eq(1).html(getCurrentTime.toString("mm")).end().eq(2).html(getCurrentTime.toString("ss"));
                                }
                            }
                            sub.chat.clock.timer = $("#widget_timer .timer_wrap").FlipClock(getTotalTime, timeOpt);
                            sub.chat.clock.resize();
                        }
                    }
                    else if(getMsg[0] == "!시간일시정지" || getMsg[0] == "!시간정지" || getMsg[0] == "!시간중지") {
                        //시간 일시정지
                        if(sub.chat.clock.timer !== null) {
                            sub.chat.clock.timer.stop();
                        }
                    }
                    else if(getMsg[0] == "!시간시작" || getMsg[0] == "!시간다시시작" || getMsg[0] == "!시간재생") {
                        //시간 일시정지 다시 시작
                        if(sub.chat.clock.timer !== null) {
                            sub.chat.clock.timer.start();
                        }
                    }
                    else if(getMsg[0] == "!시간삭제" || getMsg[0] == "!시간끝") {
                        if(sub.chat.clock.timer !== null) {
                            sub.chat.clock.timer.stop();
                            sub.chat.clock.timer.timer._destroyTimer();
                            sub.chat.clock.timer = null;
                        }
                        $("#widget_timer").remove();
                        $("head .widget_timer").remove();
                    }
                }
                catch(error) {
                }
            },
            resize: function() {
                if(sub.chat.clock.timer !== null) {
                    try{
                        var chatOpt = sub.chat.opt;
                        var getClockWidth = chatOpt.box.innerWidth();
                        var getClockScale = 1;
                        var getScaleClass = "";
                        var getClockHeight = 80;
                        if(getClockWidth < 400) {
                            getScaleClass = "scale";
                            getClockScale = getClockWidth / 400;
                            getClockHeight *= getClockScale;
                        }
                        $("#widget_timer").removeClass("scale").addClass(getScaleClass).find(".timer_area").css("transform","scale(" + getClockScale + ")");
                        $("head .widget_timer").remove();
                        if(chatOpt.box.hasClass("notice_add")) {
                            var getNoticeHeight = chatOpt.box.find(".notice_box").height();
                            getClockHeight += getNoticeHeight;
                        }
                        $("head").append("<style class='widget_timer'>#item_chat.item_chat_clock{padding-top:" + getClockHeight + "px}#widget_timer{height:" + (80 * getClockScale) + "px}</style>");
                    }
                    catch(error) {
                    }
                }
            }
        },
        joinvoice: function(data) {
            if(sub.debug) console.log("chat joinvoice", data);
            var chatOpt = sub.chat.opt;
            if(pageType == "setup") {
                var loadData = sub.chat.loaddata;
            }
            else {
                var loadData = sub.chat.data;
            }
            
            if(loadData.joinvoice != undefined && loadData.joinvoice == true && (data.uid != "" || data.uname != "")) {
                //트위치 봇 예외
                if(data.broad == "twitch") {
                    if(data.uname.indexOf("justinfan") > -1 && parseInt(data.uname.replace("justinfan", ""), 10) > 0) {
                        return;
                    }
                    else if(data.uname.indexOf("mocobee") > -1) {
                        return;
                    }
                }
                var getVoiceTime = new Date().getTime();
                var getVoiceId = data.uid != "" ? data.uid : data.uname;
                if(chatJoinData[getVoiceId] != undefined && chatJoinData[getVoiceId] + (1000 * 60) > getVoiceTime) {
                    //console.log("joinvoice timeout");
                    return;
                }
                var getVoiceExcept = loadData.joinexcept.split(",");
                if(loadData.joinexcept != "" && getVoiceExcept.length > 0 && (getVoiceExcept.indexOf(data.uid) > -1 || getVoiceExcept.indexOf(data.uname) > -1)) {
                    //console.log("joinvoice except");
                    return;
                }
                
                var getVoiceMsg = loadData.jointext;
                if(getVoiceMsg == "") getVoiceMsg = sub.chat.opt.jointext;
                var getVoiceText = getVoiceMsg.replace(new RegExp("{닉네임}","gi"),data.uname);
                if(data.uid !== "" && data.uid !== data.uname) {
                    getVoiceText = getVoiceText.replace(new RegExp("{아이디}","gi"),data.uid);
                }
                
                if(loadData.jointype == undefined || loadData.jointype == "voice") {
                    if(chatOpt.audio != null) {
                        chatJoinData[getVoiceId] = getVoiceTime;
                        var getVoiceVolume = player.opt.sound != undefined && player.opt.sound == false ? 0 : parseInt(loadData.joinvolume, 10);
                        var getVoiceRate = parseFloat(loadData.joinrate, 10) / 2;
                        var getVoiceUrl = "https://www.google.com/speech-api/v1/synthesize?ie=UTF-8&text=" + encodeURIComponent(getVoiceText) + "&lang=ko&speed=" + getVoiceRate;
                        
                        chatOpt.audio.stop();
                        chatOpt.audio.play({
                            url:getVoiceUrl,
                            volume: getVoiceVolume
                        });
                    }
                }
                
                sub.chat.add({
                    broadtype:data.broad,
                    type:"join",
                    grade:"",
                    gender:"none",
                    agent:"none",
                    support:"none",
                    quick:"none",
                    uid:data.uid,
                    uname:data.uname,
                    msg:getVoiceText
                });
            }
        },
        notice: {
            time: null,
            load: function(msg) {
                if(msg.indexOf("!공지삭제") === 0) {
                    clearInterval(sub.chat.notice.time);
                    $("#item_chat").removeClass("notice_add").find(".notice_box").remove();
                    // if(loadData.widgetuser == true && loadData.widgetuserlayout == "widget_user_top") {
                        // $("#item_chat.item_chat_widgetuser.widget_user_top").css("padding-top","1.8em")
                    // }
                }
                else if(msg.indexOf("!공지") === 0) {
                    var getNoticeText = $.trim(msg.replace("!공지/","").replace("!공지 /","").replace("!공지-","").replace("!공지 -","").replace("!공지",""));
                    clearInterval(sub.chat.notice.time);
                    if(getNoticeText !== "") {
                        $("#item_chat .notice_box").remove();
                        if($.trim(getNoticeText) == "시간" || getNoticeText.indexOf("{시간}") > -1) {
                            if($.trim(getNoticeText) == "시간") {
                                getNoticeText = '<span class="notice_time"></span>';
                            }
                            else {
                                getNoticeText = getNoticeText.replace("{시간}", '<span class="notice_time"></span>');
                            }
                            $("#item_chat").addClass("notice_add").append('<div class="notice_box"><p class="notice_text">' + getNoticeText + '</p></div>');
                            var getNoticeTime = $("#item_chat .notice_box .notice_time");
                            sub.chat.notice.time = setInterval(function() {
                                var getTimeStr = new Date().toString("M월 d일 tt h시 m분 ddd요일");
                                getTimeStr = getTimeStr.replace("AM","오전").replace("PM","오후").replace("Mon","월").replace("Tue","화").replace("Wed","수").replace("Thu","목").replace("Fri","금").replace("Sat","토").replace("Sun","일");
                                getNoticeTime.html(getTimeStr);
                            }, 1000);
                        }
                        else if(getNoticeText.indexOf("업타임}") > -1 || getNoticeText.indexOf("방송시간}") > -1) {
                            var getStartTime = "";
                            if(getNoticeText.indexOf("트위치업타임") > -1 || getNoticeText.indexOf("트위치방송시간") > -1) {
                                getStartTime = player.twitch.datainfo.start;
                                getNoticeText = getNoticeText.replace("{트위치업타임}",'<span class="notice_time"></span>').replace("{트위치방송시간}",'<span class="notice_time"></span>');
                            }
                            else if(getNoticeText.indexOf("유튜브업타임") > -1 || getNoticeText.indexOf("유튜브방송시간") > -1) {
                                getStartTime = player.youtube.datainfo.start;
                                getNoticeText = getNoticeText.replace("{유튜브업타임}",'<span class="notice_time"></span>').replace("{유튜브방송시간}",'<span class="notice_time"></span>');
                            }
                            else if(getNoticeText.indexOf("카카오업타임") > -1 || getNoticeText.indexOf("카카오방송시간") > -1) {
                                getStartTime = player.kakaotv.datainfo.start;
                                getNoticeText = getNoticeText.replace("{카카오업타임}",'<span class="notice_time"></span>').replace("{카카오방송시간}",'<span class="notice_time"></span>');
                            }
                            else {
                                getStartTime = player.afreecatv.datainfo.start;
                                getNoticeText = getNoticeText.replace("{업타임}",'<span class="notice_time"></span>').replace("{방송시간}",'<span class="notice_time"></span>');
                            }
                            $("#item_chat").addClass("notice_add").append('<div class="notice_box"><p class="notice_text">' + getNoticeText + '</p></div>');
                            var getNoticeTime = $("#item_chat .notice_box .notice_time");
                            sub.chat.notice.time = setInterval(function() {
                                getNoticeTime.html(replace.uptime(getStartTime));
                            }, 1000);
                        }
                        else {
                            $("#item_chat").addClass("notice_add").append('<div class="notice_box"><p class="notice_text">' + getNoticeText + '</p></div>');
                        }
                        sub.chat.notice.resize();
                    }
                }
            },
            move: function(target) {
                doTimeout("chat_notice_move", false);
                doTimeout("notice_move", function() {
                    var getNoticeWidth = target.innerWidth();
                    target.stop(true,true).animate({ left:-(getNoticeWidth + 200) }, getNoticeWidth * 32, "linear", function() {
                        sub.chat.notice.resize();
                    });
                }, 200);
            },
            resize: function() {
                doTimeout("notice_resize" , function() {
                    var getNoticeBox = $("#item_chat .notice_box");
                    if(getNoticeBox.length > 0) {
                        getNoticeBox.removeClass("move");
                        var getNoticeText = getNoticeBox.find("p.notice_text");
                        var getNoticeWidth = getNoticeText.innerWidth();
                        var getNoticeHeight = 0;
                        getNoticeText.css("left","auto").stop(true,true);
                        if(getNoticeWidth + 10 > sub.chat.opt.boxwidth) {
                            sub.chat.notice.move(getNoticeText.css("left","100%"));
                            getNoticeBox.addClass("move");
                        }
                    }
                }, 200);
            }
        },
        chatloginterval: null,
        chatlog: function() {
            clearTimeout(sub.chat.chatloginterval);
            
            // sub.chat.chatloginterval = setTimeout(function() {
                // if(chatLogData.length > 0) {
                    // //var getChatLog = JSON.stringify(chatLogData);
                    // var getChatLog = chatLogData.join("\r\n");
                    // chatLogData = [];
                    // $.ajax({
                        // type:"POST",
                        // url:datasaveLink + "chatlog.php",
                        // data:{
                            // id:loginInfo.id,
                            // idx:loginInfo.idx,
                            // chat:getChatLog,
                            // time:1
                        // },
                        // success: function() {
                            // getChatLog = "";
                        // }
                    // });
                // }
//                 
                // sub.chat.chatlog();
            // }, 60 * 1000);
        },
        inputdata: {
            use: false,
            type:"all",
            msg:[],
            afreecatv:false,
            twitch:false,
            youtube:false,
            facebook:false,
            kakaotv:false
        },
        inputchat: function() {
            if(localOpt.localcheck() === false) return;
            
            //사용 체크
            var getChatUseCheck = localStorage.getItem("chat_input_use");
            
            //저장 토큰 불러오기
            var getAfreecaToken = localStorage.getItem("token_afreecatv");
            var getAfreecaChatUse = localStorage.getItem("afreecatv_chat_use");
            if(getAfreecaChatUse != undefined && getAfreecaChatUse != null && getAfreecaChatUse == "use") {
                sub.chat.inputdata.afreecatv = true;
                $("#popup_chat_setup .main_area .title .btn_chat_afreecatv_unlink").removeClass("hide");
            }
            var getYoutubeToken = localStorage.getItem("token_youtube");
            if(getYoutubeToken != undefined && getYoutubeToken != null && getYoutubeToken !== "") {
                //loginInfo.yttoken = getYoutubeToken;
                sub.chat.inputdata.youtube = true;
                $("#popup_chat_setup .main_area .title .btn_chat_youtube_unlink").removeClass("hide");
            }
            var getTwitchToken = localStorage.getItem("token_twitch");
            if(getTwitchToken != undefined && getTwitchToken != null && getTwitchToken !== "") {
                //loginInfo.twauth = getTwitchToken;
                sub.chat.inputdata.twitch = true;
                $("#popup_chat_setup .main_area .title .btn_chat_twitch_unlink").removeClass("hide");
            }
            var getFacebookToken = localStorage.getItem("token_facebook");
            if(getFacebookToken != undefined && getFacebookToken != null && getFacebookToken !== "") {
                //loginInfo.fatoken = getFacebookToken;
                sub.chat.inputdata.facebook = true;
                $("#popup_chat_setup .main_area .title .btn_chat_facebook_unlink").removeClass("hide");
            }
            
            $(".tooltip_box .btn_chat_setup").addClass("show").on("click", function() {
                $("#popup_chat_setup").stop(true,true).fadeIn(200);
                return false;
            });
            $("#popup_chat_setup .btn_close").on("click", function() {
                $("#popup_chat_setup").stop(true,true).fadeOut(200);
                return false;
            });
            
            //채팅 종류 선택
            var chatSelectLang = $("#input_chat_box .select_lang");
            var chatSelectLangVal = chatSelectLang.find(".btn_value");
            var chatSelectLangList = chatSelectLang.find(".select_list");
            $("#input_chat_box .select_lang .btn_value").on("click", function() {
                chatSelectLang.toggleClass("active");
                chatSelectLangList.stop(true,true).slideToggle(200);
                return false;
            });
            var chatSelectLangBtn = chatSelectLang.find(".btn_lang").on("click", function() {
                chatSelectLang.removeClass("active");
                chatSelectLangBtn.removeClass("active");
                chatSelectLangList.stop(true,true).slideUp(200);
                var getLangType = $(this).addClass("active").data("type");
                sub.chat.inputdata.type = getLangType;
                chatSelectLangVal.attr("class","btn_value " + getLangType);
            });
            
            //채팅 입력 사용
            function chatInputRun(type) {
                sub.chat.inputdata.use = type;
                if(type == true) {
                    checkInputUse.parent().addClass("active");
                    localStorage.setItem("chat_input_use", "use");
                    $("body").addClass("input_chat_box");
                    $("#popup_chat_setup .main_area").stop(true,true).fadeIn(200);
                    $("#input_chat_box").stop(true,true).fadeIn(200);
                }
                else {
                    checkInputUse.parent().removeClass("active");
                    localStorage.setItem("chat_input_use", "");
                    $("body").removeClass("input_chat_box");
                    $("#popup_chat_setup .main_area").stop(true,true).fadeOut(200);
                    $("#input_chat_box").stop(true,true).fadeOut(200);
                }
            }
            var checkInputUse = $("#popup_chat_setup #chat_input_use").on("click", function() {
                chatInputRun(this.checked);
            });
            
            if(getChatUseCheck != undefined && getChatUseCheck != null && getChatUseCheck == "use") {
                checkInputUse.prop("checked",true);
                chatInputRun(true);
            }
            
            //연결 해제
            $("#popup_chat_setup .main_area .title .btn_unlink").on("click", function() {
                var getChatType = $(this).data("type");
                sub.chat.inputdata[getChatType] = false;
                localStorage.setItem("token_" + getChatType, "");
                $(this).addClass("hide");
                
                if(getChatType == "afreecatv") {
                    localStorage.setItem("afreecatv_chat_use", "");
                    $.ajax({
                        url:"lib/broadinfo.php",
                        dataType:"json",
                        data:{
                            type:"afreecatv",
                            id:loginInfo.bjid,
                            email:realKey,
                            key:idxNum
                        },
                        success: function(data) {
                            location.reload();
                        }
                    });
                }
                else {
                    location.reload();
                }
                return false;
            });
            
            //아프리카 사용
            function chatAfreecaRun(type) {
                if(type == true) {
                    checkAfreecaChatUse.parent().addClass("active");
                    localStorage.setItem("afreecatv_chat_use", "use");
                }
                else {
                    checkAfreecaChatUse.parent().removeClass("active");
                    localStorage.setItem("afreecatv_chat_use", "");
                }
                setTimeout(function() {
                    location.reload();
                }, 100);
            }
            var checkAfreecaChatUse = $("#popup_chat_setup #chat_afreecatv_use").on("click", function() {
                chatAfreecaRun(this.checked);
            });
            
            if(getAfreecaChatUse != undefined && getAfreecaChatUse != null && getAfreecaChatUse == "use") {
                checkAfreecaChatUse.prop("checked",true);
                checkAfreecaChatUse.parent().addClass("active");
                localStorage.setItem("afreecatv_chat_use", "use");
            }
            
            //채팅입력
            var inputCtrlCheck = false;
            var inputChatAll = $("#input_chat_all").on("keypress", function(e) {
                if(inputCtrlCheck === false && e.keyCode == 13) {
                    btnChatAll.trigger("click");
                    return false;
                }
                else if((inputCtrlCheck === true || e.ctrlKey === true) && (e.keyCode == 13 || e.keyCode == 10)) {
                    inputChatAll.val(function(i,val) {
                        return val + "\n";
                    });
                }
            }).on("keydown", function(e) {
                if(e.keyCode == 17) {
                    inputCtrlCheck = true;
                }
            }).on("keyup", function(e) {
                if(e.keyCode == 17) {
                    inputCtrlCheck = false;
                }
            }).on("focusin", function() {
                chatSelectLang.removeClass("active");
                chatSelectLangList.stop(true,true).slideUp(200);
            });
            
            var chatInputAlert = {
                afreecatv:$("#input_chat_box .chat_input_alert .input_alert.afreecatv"),
                twitch:$("#input_chat_box .chat_input_alert .input_alert.twitch"),
                youtube:$("#input_chat_box .chat_input_alert .input_alert.youtube"),
                facebook:$("#input_chat_box .chat_input_alert .input_alert.facebook"),
                kakaotv:$("#input_chat_box .chat_input_alert .input_alert.kakaotv"),
                navertv:$("#input_chat_box .chat_input_alert .input_alert.navertv")
            }
            $("#input_chat_box .chat_input_alert .input_alert").on("click", function() {
                $("#popup_chat_setup").stop(true,true).fadeIn(200);
                return false;
            });
            
            var btnChatAll = $("#btn_chat_all").on("click", function() {
                var getInput = inputChatAll;
                var getText = getInput.val();
                if(sub.chat.inputdata.msg === "") return false;
                
                sub.chat.inputdata.msg.push(getText.replace(/\s/g, ""));
                getInput.val("");  //채팅 입력후 삭제
                if(sub.debug) console.log("chatinput", getText, sub.chat.inputdata.msg);
                
                doTimeout("chatinput_msg",function() {
                    sub.chat.inputdata.msg = [];
                }, 20000);
                
                 //TODO 기록
                // $.ajax({
                    // type:"POST",
                    // url:logUrl + "lib/getlog.php",
                    // data:{
                        // type:"chatinput",
                        // log:JSON.stringify(loginInfo)
                    // }
                // });
                try{
                    //아프리카
                    var getChatInput = false;
                    if((sub.chat.inputdata.type == "" || sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "afreecatv") && sub.chat.inputdata.afreecatv == true && loginInfo.bjid != "") {
                        if(csocket != null && csocket.readyState && csocket.readyState == 1) {
                            getChatInput = true;
                            chatInputAlert.afreecatv.removeClass("show");
                            comm.afreeca.socket.message(getText);
                        }
                    }
                    
                    //트위치
                    if((sub.chat.inputdata.type == "" || sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "twitch") && sub.chat.inputdata.twitch == true && loginInfo.twid != "" && player.twitch.datainfo.id != "") {
                        if(player.twitch.socket != null && player.twitch.socket.readyState() == "OPEN") {
                            getChatInput = true;
                            player.twitch.socket.say("#" + player.twitch.datainfo.id, getText).then(function(data) {
                                if(sub.debug) console.log("chatinput twitch success", data);
                                chatInputAlert.twitch.removeClass("show");
                            }).catch(function(error) {
                                if(sub.debug) console.log("chatinput twitch error", error);
                                chatInputAlert.twitch.addClass("show");
                                
                                // doTimeout("twitch_refresh_run" , function() {
                                    // player.twitch.refresh();
                                // }, 1000);
                            });
                        }
                    }
                    
                    //유튜브
                    if((sub.chat.inputdata.type == "" || sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "youtube") && sub.chat.inputdata.youtube == true && loginInfo.ytchid != "" && loginInfo.yttoken != "") {
                        if(player.youtube.datainfo.id != "") {
                            getChatInput = true;
                        //if(player.youtube.datainfo.id != "" && player.youtube.datainfo.connect == true) {
                            var youtubeData = {
                                snippet:{
                                    type:"textMessageEvent",
                                    liveChatId:loginInfo.ytliveid,
                                    textMessageDetails:{
                                        messageText:getText
                                    }
                                }
                            }
                            
                            $.ajax({
                                type:"POST",
                                url:"https://www.googleapis.com/youtube/v3/liveChat/messages?part=snippet&key=" + youtubeApi,
                                headers: {
                                    "Content-Type": "application/json",
                                    "Authorization": "Bearer " + loginInfo.yttoken
                                },
                                dataType:"json",
                                data:JSON.stringify(youtubeData),
                                success:function(data) {
                                    //console.log("chatinput youtube success",data);
                                    chatInputAlert.youtube.removeClass("show");
                                },
                                error: function(data) {
                                    //console.log("chatinput youtube error",data);
                                    chatInputAlert.youtube.addClass("show");
                                    
                                    doTimeout("youtube_refresh_run" , function() {
                                        player.youtube.refresh();
                                    }, 1000);
                                }
                            });
                        }
                    }
                    
                    //카카오tv
                    // if((sub.chat.inputdata.type == "" || sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "kakaotv") && sub.chat.inputdata.kakaotv == true && loginInfo.kaid != "") {
                        // if(player.kakaotv.socket != null && player.kakaotv.socket.connected == true && player.kakaotv.datainfo.roomid != "") {
                            // var getKakaotvChat = {msg:getText};
                            // $.ajax({
                                // type:"POST",
                                // url: "https://play.kakao.com/chat/service/api/amsg",
                                // dataType:"json",
                                // data: {
                                    // sessionid:0,
                                    // roomid:player.kakaotv.datainfo.roomid,
                                    // msg:JSON.stringify(getKakaotvChat)
                                // },
                                // success: function(data) {
                                    // console.log(data);
                                // }
                            // });
                        // }
                    // }
                    
                    //페이스북
                    // if((sub.chat.inputdata.type == "" || sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "facebook") && sub.chat.inputdata.facebook == true && loginInfo.faid != "" && loginInfo.fatoken != "" && player.facebook.datainfo.postid != "") {
                        // if(player.facebook.datainfo.connect == true && player.facebook.datainfo.postid != "") {
                            // FB.api(
                                // "/" + player.facebook.datainfo.postid + "/comments",
                                // // "/760549874140302/comments",
                                // "POST", { "message": getText },
                                // function (data) {
                                    // console.log("chatinput facebook",data);
                                // },
                                // {access_token: loginInfo.fatoken}
                            // );
                        // }
                    // }
                    
                    if(getChatInput == true) {
                        var getChatData = {
                            broadtype:"",
                            type:"chat",
                            grade:"",
                            gender:"m",
                            agent:"pc",
                            support:"",
                            quick:"",
                            follow:"",
                            uid:"",
                            uname:"",
                            msg:getText,
                            chatinput:true,
                            chattype:sub.chat.inputdata.type
                        }
                        if((sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "afreecatv") && $.inArray("afreecatv", sub.chat.opt.broadlist) > -1) {
                            getChatData.broadtype = "afreecatv";
                            getChatData.grade = "bj";
                            getChatData.uid = loginInfo.bjid;
                            getChatData.uname = loginInfo.bjname;
                        }
                        else if((sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "twitch") && $.inArray("twitch", sub.chat.opt.broadlist) > -1) {
                            getChatData.broadtype = "twitch";
                            getChatData.grade = {broadcaster:1};
                            getChatData.uid = loginInfo.twid;
                            getChatData.uname = loginInfo.twname;
                        }
                        else if((sub.chat.inputdata.type == "all" || sub.chat.inputdata.type == "youtube") && $.inArray("youtube", sub.chat.opt.broadlist) > -1) {
                            getChatData.broadtype = "youtube";
                            getChatData.grade = "owner";
                            getChatData.uid = loginInfo.ytchid;
                            getChatData.uname = loginInfo.ytname;
                        }
                        if(getChatData.broadtype !== "") {
                            sub.chat.add(getChatData);
                        }
                    }
                }
                catch(error) {
                    
                }
                
                return false;
            });
            
            //아프리카 로그인
            // var getAfMsg = $("#popup_chat_setup .msg_afreeca");
            // var getChatAfid = $("#popup_chat_setup .input_chat_afreeca_id");
            // var getChatAfpw = $("#popup_chat_setup .input_chat_afreeca_pw");
            // var getChatAfpw2 = $("#popup_chat_setup .input_chat_afreeca_pw2");
            // var btnChatAfreeca = $("#popup_chat_setup .btn_chat_afreeca").on("click", function() {
                // getAfMsg.stop(true,true).stop(true,true).fadeOut(200);
                // if(getChatAfid.val() === "") {
                    // getAfMsg.stop(true,true).fadeIn(200).find(".msg").html("아이디를 입력해주세요");
                    // getChatAfid.focus();
                    // return false;
                // }
                // if(getChatAfpw.val() === "") {
                    // getAfMsg.stop(true,true).fadeIn(200).find(".msg").html("비밀번호를 입력해주세요");
                    // getChatAfpw.focus();
                    // return false;
                // }
//                 
                // socket.emit("afchatlogin", {
                    // id:getChatAfid.val(),
                    // pw:getChatAfpw.val(),
                    // pw2:getChatAfpw2.val()
                // });
//                 
                // return false;
            // });
            // getChatAfid.on("keypress", function(e) {
                // if(e.keyCode == 13) {
                    // btnChatAfreeca.trigger("click");
                    // return false;
                // }
            // });
            // getChatAfpw.on("keypress", function(e) {
                // if(e.keyCode == 13) {
                    // btnChatAfreeca.trigger("click");
                    // return false;
                // }
            // });
            // getChatAfpw2.on("keypress", function(e) {
                // if(e.keyCode == 13) {
                    // btnChatAfreeca.trigger("click");
                    // return false;
                // }
            // });
            $("#popup_chat_setup .btn_afreecatv_help").on("click", function() {
                var popupWidth = 620;
                var popupHeight = 600;
                var popupLeft = (screen.width/2)-(popupWidth/2);
                var popupTop = (screen.height/2)-(popupHeight/2);
                var popupchatafreeca = window.open("http://afreehp.kr/aflogin.php","popupchatafreeca","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width="+popupWidth+", height="+popupHeight+", top="+popupTop+", left="+popupLeft);
                return false;
            });
            
            //트위치 로그인
            $("#popup_chat_setup .btn_chat_twitch").on("click", function() {
                var getUrl = "https://api.twitch.tv/kraken/oauth2/authorize?response_type=code&client_id=" + twitchClientIdChat2 + "&redirect_uri=http://afreehp.kr/lib/logintwitch_chat2.php&scope=user_read+chat_login&email=" + realKey + "&key=" + idxNum;
                var popupWidth = 450;
                var popupHeight = 600;
                var popupLeft = (screen.width/2)-(popupWidth/2);
                var popupTop = (screen.height/2)-(popupHeight/2);
                var popupchattwitch = window.open(getUrl,"popupchattwitch","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width="+popupWidth+", height="+popupHeight+", top="+popupTop+", left="+popupLeft);
                return false;
            });
            
            //유튜브 로그인            
            $("#popup_chat_setup .btn_chat_youtube").on("click", function() {
                var getUrl = "https://accounts.google.com/o/oauth2/auth?client_id=" + youtubeClientId + "&scope=https://www.googleapis.com/auth/youtube+profile&response_type=code&redirect_uri=http://afreehp.kr/lib/loginyoutube_chat2.php&access_type=offline&approval_prompt=force";
                var popupWidth = 450;
                var popupHeight = 600;
                var popupLeft = (screen.width/2)-(popupWidth/2);
                var popupTop = (screen.height/2)-(popupHeight/2);
                var popupchatyoutube = window.open(getUrl,"popupchatyoutube","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width="+popupWidth+", height="+popupHeight+", top="+popupTop+", left="+popupLeft);
                return false;
            });
            
            //페이스북 로그인
            var getFaMsg = $("#popup_chat_setup .msg_facebook");
            $("#popup_chat_setup .btn_chat_facebook").on("click", function() {
                FB.login(function(response) {
                    if(response && response.authResponse && response.authResponse.userID) {
                        getFaMsg.stop(true,true).stop(true,true).fadeOut(200);
                        playerChatSetup("facebook", response.authResponse.accessToken);
                    }
                    else {
                        getFaMsg.stop(true,true).fadeIn(200).find(".msg").html("페이스북 로그인에 실패했거나 정보를 불러올 수 없습니다. 다시 로그인해주세요");
                    }
                }, { scope:"email,user_videos,user_posts,read_insights,pages_show_list,publish_actions", return_scopes:true });
                
                return false;
            });
        }
    }
}
var chatResize = function() {};
var chatColorData = {};
var chatJoinData = {};

